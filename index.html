<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TORCH | OS</title>

    <meta name="description"
        content="Advanced cyberdeck for hacking tools, CTF resources, and red team ops.">
    <meta name="theme-color" content="#ff9d00">

    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;500;700&family=Rajdhani:wght@500;600;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsvectormap/dist/css/jsvectormap.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap/dist/maps/world.js"></script>

    <style>
        :root {
            --c-accent: #ff9d00;
            --c-accent-rgb: 255, 157, 0;
            --c-accent-dim: rgba(255, 157, 0, 0.1);
            --c-bg: #020202;
            --c-panel: rgba(5, 5, 5, 0.92);
            --c-border: rgba(255, 157, 0, 0.2);
            --c-text: #cccccc;
            --font-mono: 'JetBrains Mono', monospace;
            --font-disp: 'Rajdhani', sans-serif;
            --header-h: 55px;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            cursor: none !important;
        }

        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            background-color: var(--c-bg);
            color: var(--c-text);
            font-family: var(--font-mono);
            overflow: hidden;
            user-select: none;
        }

        #boot-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 100000;
            display: flex; flex-direction: column; justify-content: flex-end;
            padding: 40px;
            font-family: var(--font-mono); font-size: 14px;
            color: var(--c-accent);
            pointer-events: auto;
        }
        .boot-line {
            margin-bottom: 5px;
            opacity: 0;
            animation: fadeInLine 0.1s forwards;
        }
        @keyframes fadeInLine { to { opacity: 1; } }

        .crt-on {
            animation: turnOn 0.4s ease-out forwards;
        }
        @keyframes turnOn {
            0% { transform: scale(1, 0.002); opacity: 0; filter: brightness(3); }
            50% { transform: scale(1, 0.002); opacity: 1; }
            75% { transform: scale(1.1, 1); }
            100% { transform: scale(1, 1); opacity: 1; filter: brightness(1); }
        }

        #screen-wrapper {
            width: 100%; height: 100%;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.9);
        }

        .layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
        }

        .hud-corner {
            position: fixed; width: 100px; height: 100px; z-index: 50; pointer-events: none;
            border: 2px solid var(--c-accent); opacity: 0.3;
        }
        .hc-tl { top: 20px; left: 20px; border-right: none; border-bottom: none; border-top-left-radius: 10px; }
        .hc-tr { top: 20px; right: 20px; border-left: none; border-bottom: none; border-top-right-radius: 10px; }
        .hc-bl { bottom: 20px; left: 20px; border-right: none; border-top: none; border-bottom-left-radius: 10px; }
        .hc-br { bottom: 20px; right: 20px; border-left: none; border-top: none; border-bottom-right-radius: 10px; }

        #hex-grid {
            background-image: url("data:image/svg+xml,%3Csvg width='24' height='40' viewBox='0 0 24 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 40c5.523 0 10-4.477 10-10V10c0-5.523-4.477-10-10-10s-10 4.477-10 10v20c0 5.523 4.477 10 10 10zM12 20c5.523 0 10-4.477 10-10V0H2v10c0 5.523 4.477 10 10 10z' fill='%23ff9d00' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.4;
            z-index: 0;
        }

        #bg-grid {
            background-image: 
                linear-gradient(rgba(255, 157, 0, 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 157, 0, 0.15) 1px, transparent 1px);
            background-size: 60px 60px;
            opacity: 0.25;
            z-index: 0;
            transform: perspective(600px) rotateX(25deg) scale(1.5);
            transform-origin: 50% 0;
            transition: transform 0.1s linear;
        }

        #scanline {
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.3));
            background-size: 100% 4px;
            z-index: 998;
            opacity: 0.3;
            pointer-events: none;
        }

        #vignette {
            background: radial-gradient(circle at center, transparent 40%, #000 130%);
            z-index: 997;
            opacity: 0.6;
        }
        
        #noise-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            opacity: 0.05; z-index: 996; pointer-events: none;
            animation: noiseAnim 0.5s steps(5) infinite;
        }
        @keyframes noiseAnim { 0% { transform: translate(0,0); } 100% { transform: translate(5px, 5px); } }
        
        #particle-canvas {
            z-index: 1;
            opacity: 0.8;
        }

        body {
            animation: crtFlicker 0.1s infinite;
        }

        @keyframes crtFlicker {
            0% { opacity: 0.99; }
            50% { opacity: 1; }
            100% { opacity: 0.995; }
        }

        .ripple {
            position: absolute;
            border: 2px solid var(--c-accent);
            border-radius: 50%;
            width: 20px; height: 20px;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9998;
            animation: rippleExpand 0.4s ease-out forwards;
            box-shadow: 0 0 10px var(--c-accent);
        }

        @keyframes rippleExpand {
            0% { width: 0; height: 0; opacity: 1; border-width: 5px; }
            100% { width: 100px; height: 100px; opacity: 0; border-width: 0px; }
        }

        .app-container {
            position: relative;
            z-index: 10;
            display: grid;
            grid-template-columns: 280px 1fr 40px; 
            grid-template-rows: var(--header-h) 1fr;
            height: 100vh;
            width: 100vw;
            padding: 15px;
            gap: 15px;
            opacity: 0;
            transition: opacity 1s ease-in;
        }

        .sidebar { grid-area: 1 / 1 / -1 / 2; }
        .top-header { grid-area: 1 / 2 / 2 / 3; }
        .main-view { grid-area: 2 / 2 / -1 / 3; }
        .data-stream { grid-area: 1 / 3 / -1 / -1; }

        @keyframes border-pulse {
            0%, 100% { 
                border-color: rgba(255, 157, 0, 0.25); 
                box-shadow: 0 0 10px rgba(0,0,0,0.8), inset 0 0 20px rgba(255, 157, 0, 0.02);
            }
            50% { 
                border-color: rgba(255, 157, 0, 0.6); 
                box-shadow: 0 0 15px rgba(255, 157, 0, 0.1), inset 0 0 40px rgba(255, 157, 0, 0.08);
            }
        }

        .tech-border {
            border: 1px solid rgba(255, 157, 0, 0.3);
            position: relative;
            background: var(--c-panel);
            backdrop-filter: blur(12px);
            transition: all 0.3s;
            overflow: hidden;
            animation: border-pulse 4s infinite ease-in-out;
        }
        
        .tech-border:hover {
            animation-play-state: paused;
            border-color: var(--c-accent);
            box-shadow: 0 0 30px rgba(255, 157, 0, 0.2), inset 0 0 20px rgba(255, 157, 0, 0.1);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .brand {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--c-border);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-logo {
            width: 40px; height: 40px;
            background: rgba(var(--c-accent-rgb), 0.1);
            border: 1px solid var(--c-accent);
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 15px var(--c-accent);
            animation: logoSpin 10s infinite linear;
        }
        
        @keyframes logoSpin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .brand-text h1 {
            font-family: var(--font-disp);
            font-size: 1.8rem;
            color: #fff;
            line-height: 0.9;
            font-weight: 800;
            letter-spacing: 2px;
            text-shadow: 0 0 5px var(--c-accent);
        }
        
        .brand-text span {
            font-size: 0.65rem;
            color: var(--c-accent);
            text-transform: uppercase;
            letter-spacing: 4px;
            animation: blink 2s infinite;
        }

        .nav-menu {
            display: flex;
            flex-direction: column;
            gap: 10px;
            flex-grow: 1;
        }

        .nav-btn {
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255,255,255,0.05);
            border-left: 3px solid rgba(255,255,255,0.1);
            color: #888;
            padding: 14px 18px;
            font-family: var(--font-disp);
            font-weight: 700;
            font-size: 1.1rem;
            letter-spacing: 2px;
            text-align: left;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            text-transform: uppercase;
            transition: all 0.2s ease;
            overflow: hidden; 
        }
        
        .nav-btn::before {
            content: ''; position: absolute; top:0; left:0; height:100%; width: 0%;
            background: rgba(255, 157, 0, 0.1); 
            transition: width 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 0;
        }
        
        .btn-content { 
            position: relative; z-index: 2; display:flex; align-items:center; gap:10px; 
            transition: transform 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .nav-btn:hover {
            color: #fff;
            border-color: rgba(255, 157, 0, 0.3);
            border-left-color: var(--c-accent);
        }
        .nav-btn:hover .btn-content { transform: translateX(8px); }
        .nav-btn:hover::before { width: 100%; }

        .nav-btn.active {
            background: transparent;
            color: #fff;
            border-color: var(--c-accent);
            border-left-color: var(--c-accent);
            box-shadow: 0 0 15px rgba(255, 157, 0, 0.1);
        }
        .nav-btn.active .btn-content { transform: translateX(8px); }
        .nav-btn.active .icon { color: var(--c-accent); } 
        
        .sys-info {
            font-size: 0.7rem;
            color: #555;
            border-top: 1px solid var(--c-border);
            padding-top: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: auto;
        }
        
        .sys-row { display: flex; justify-content: space-between; padding-bottom: 2px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .sys-val { color: #fff; text-shadow: 0 0 5px var(--c-accent); font-weight: bold; animation: pulseVal 2s infinite; }
        @keyframes pulseVal { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }

        .top-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 25px;
            background: rgba(0,0,0,0.6);
            border-bottom: 1px solid var(--c-border);
        }

        .breadcrumbs {
            font-size: 0.9rem;
            color: #666;
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        .breadcrumbs span { color: var(--c-accent); text-shadow: 0 0 8px var(--c-accent); }

        .status-bar {
            display: flex;
            gap: 25px;
            font-size: 0.75rem;
            color: #777;
            font-weight: bold;
        }
        
        .status-item span { color: #fff; margin-left: 8px; text-shadow: 0 0 5px #fff; background: #222; padding: 2px 6px; border: 1px solid #444; }

        .main-view {
            position: relative;
            overflow: hidden;
            padding: 0;
        }

        .view-panel {
            width: 100%; height: 100%; display: none; flex-direction: column;
            animation: panelFadeIn 0.3s ease-out;
        }
        .view-panel.active { display: flex; }
        @keyframes panelFadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .data-stream {
            font-size: 9px;
            color: var(--c-accent);
            opacity: 0.6;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            overflow: hidden;
            white-space: nowrap;
            text-align: center;
            border-left: 1px solid var(--c-border);
            padding-left: 8px;
            font-family: 'Rajdhani', sans-serif;
            text-shadow: 0 0 4px var(--c-accent);
            background: rgba(0,0,0,0.3);
        }
        .stream-inner { display: inline-block; animation: scrollData 10s linear infinite; }
        @keyframes scrollData { 0% { transform: translateY(0); } 100% { transform: translateY(-50%); } }

        #term-wrapper {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            font-size: 1rem;
            text-shadow: 0 0 3px rgba(255,255,255,0.3);
            scrollbar-width: thin;
            scrollbar-color: var(--c-accent) #111;
        }
        
        #term-output { flex-grow: 1; }
        
        .ln { margin-bottom: 5px; line-height: 1.5; word-break: break-all; }
        .pr { color: var(--c-accent); font-weight: 800; margin-right: 10px; text-shadow: 0 0 8px var(--c-accent); }
        .inp {
            background: transparent; border: none; color: #fff; width: 100%; outline: none; 
            font-family: inherit; font-size: inherit; text-shadow: 0 0 4px #fff;
            caret-color: var(--c-accent);
        }

        .res-nav-bar {
            display: flex;
            border-bottom: 1px solid var(--c-border);
            background: rgba(0,0,0,0.4);
            padding: 0 10px;
            gap: 5px;
            flex-shrink: 0;
        }
        
        .res-tab {
            background: transparent; border: none; color: #666; padding: 12px 20px;
            font-family: var(--font-disp); font-size: 0.9rem; font-weight: 700; cursor: pointer;
            border-bottom: 3px solid transparent; transition: all 0.2s; text-transform: uppercase;
        }
        
        .res-tab:hover { color: #fff; text-shadow: 0 0 8px #fff; background: rgba(255,255,255,0.05); }
        .res-tab.active { color: var(--c-accent); border-bottom-color: var(--c-accent); text-shadow: 0 0 12px var(--c-accent); background: rgba(255,157,0,0.05); }

        .res-content { flex-grow: 1; overflow-y: auto; padding: 25px; }
        
        .res-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px;
        }
        
        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .res-card {
            background: rgba(20, 20, 20, 0.6); border: 1px solid var(--c-border); padding: 20px;
            text-decoration: none; transition: all 0.2s; display: flex; flex-direction: column;
            position: relative; overflow: hidden;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            opacity: 0; 
            animation: slideUpFade 0.4s ease-out forwards;
        }
        
        .res-card::before {
            content: ''; position: absolute; top:0; left:0; width: 4px; height: 100%;
            background: var(--c-accent); transform: scaleY(0); transition: transform 0.2s;
        }

        .res-card:hover {
            border-color: #fff; transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 30px rgba(0,0,0,0.8), 0 0 15px rgba(255,157,0,0.2);
        }
        .res-card:hover::before { transform: scaleY(1); }
        
        .res-card h4 {
            font-family: var(--font-disp); color: #fff; font-size: 1.3rem; font-weight: 800;
            margin-bottom: 8px; text-shadow: 0 0 5px rgba(255,255,255,0.5);
        }
        
        .res-card p { font-size: 0.8rem; color: #999; line-height: 1.4; }
        .tag {
            align-self: flex-start; font-size: 0.65rem; color: #000; background: var(--c-accent);
            padding: 2px 8px; margin-bottom: 12px; font-weight: 800; box-shadow: 0 0 10px var(--c-accent);
        }

        .id-container {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100%; text-align: center;
        }
        
        .profile-img {
            width: 120px; height: 120px; border: 2px solid var(--c-accent); padding: 5px;
            margin-bottom: 25px; box-shadow: 0 0 40px var(--c-accent-dim), inset 0 0 30px var(--c-accent-dim);
            position: relative; animation: float 6s ease-in-out infinite;
        }
        .profile-img::after {
            content:''; position:absolute; top:-10px; left:-10px; right:-10px; bottom:-10px;
            border: 1px dashed rgba(255,255,255,0.3); border-radius: 50%;
            animation: spin 20s linear infinite;
        }
        
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .social-list {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
            width: 100%; max-width: 500px; margin-top: 30px;
        }

        .social-btn {
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 2px solid var(--c-accent);
            padding: 15px 20px;
            text-decoration: none;
            display: flex; justify-content: space-between; align-items: center;
            font-family: var(--font-disp); font-weight: 700; letter-spacing: 1px;
            color: #888;
            transition: all 0.3s ease;
            position: relative; overflow: hidden;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .social-btn span:first-child { font-size: 1rem; }
        .social-btn span:last-child { font-size: 0.7rem; opacity: 0.7; font-family: var(--font-mono); }

        .social-btn::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,157,0,0.2), transparent);
            transform: translateX(-100%); transition: transform 0.5s;
        }

        .social-btn:hover {
            color: #fff; border-color: var(--c-accent);
            box-shadow: 0 0 20px rgba(255,157,0,0.15);
            transform: translateY(-2px);
        }
        .social-btn:hover span:last-child { color: var(--c-accent); opacity: 1; }
        .social-btn:hover::before { transform: translateX(100%); }

        #map-container { width: 100%; height: 100%; position: relative; }

        .jvm-tooltip { 
            background: rgba(0,0,0,0.95); border: 1px solid var(--c-accent); padding: 8px 12px; 
            color: #fff; font-family: var(--font-mono); font-size: 0.85rem; z-index: 2000; 
            border-radius: 0; white-space: nowrap; box-shadow: 0 0 15px var(--c-accent);
            text-transform: uppercase; letter-spacing: 1px;
        }

        #cursor-wrapper {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            pointer-events: none; z-index: 99999; overflow: hidden;
            mix-blend-mode: exclusion;
        }

        #cursor-outer {
            position: absolute;
            width: 40px; height: 40px;
            will-change: transform, width, height;
            transition: width 0.2s cubic-bezier(0.2, 0.8, 0.2, 1), 
                        height 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        #cursor-inner {
            position: absolute;
            width: 20px; height: 20px;
            will-change: transform;
        }

        .c-corner {
            position: absolute;
            width: 8px; height: 8px;
            border-color: var(--c-accent);
            border-style: solid;
        }
        
        .cursor-group-outer {
            position: absolute; width: 100%; height: 100%;
            animation: spinCW 10s linear infinite;
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        #cursor-outer .c-corner { border-width: 2px; }
        #cursor-outer .tl { top: 0; left: 0; border-right: none; border-bottom: none; }
        #cursor-outer .tr { top: 0; right: 0; border-left: none; border-bottom: none; }
        #cursor-outer .bl { bottom: 0; left: 0; border-right: none; border-top: none; }
        #cursor-outer .br { bottom: 0; right: 0; border-left: none; border-top: none; }

        .cursor-group-inner {
            position: absolute; width: 100%; height: 100%;
            animation: spinCCW 4s linear infinite;
        }
        #cursor-inner .c-corner { border-color: #fff; border-width: 2px; }
        #cursor-inner .tl { top: 0; left: 0; border-right: none; border-bottom: none; }
        #cursor-inner .tr { top: 0; right: 0; border-left: none; border-bottom: none; }
        #cursor-inner .bl { bottom: 0; left: 0; border-right: none; border-top: none; }
        #cursor-inner .br { bottom: 0; right: 0; border-left: none; border-top: none; }

        @keyframes spinCW { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes spinCCW { 0% { transform: rotate(0deg); } 100% { transform: rotate(-360deg); } }

        #cursor-outer.locked .cursor-group-outer {
            animation: none;
            transform: rotate(0deg) !important;
        }

        body.clicking #cursor-outer .c-corner { border-color: #ff3333; }
        body.clicking #cursor-inner .cursor-group-inner { background: #fff; opacity: 0.8; transform: scale(0.6); } 
        body.clicking #cursor-inner .c-corner { border: none; } 
        
        body.clicking .cursor-group-outer { transform: scale(0.9); }

        #notification-area {
            position: fixed; bottom: 30px; right: 30px;
            display: flex; flex-direction: column; gap: 12px;
            z-index: 2000; pointer-events: none;
        }
        
        .sys-msg {
            background: rgba(0, 0, 0, 0.95);
            border-right: 4px solid var(--c-accent);
            color: #fff; padding: 15px 25px; font-size: 0.85rem;
            box-shadow: -5px 0 25px rgba(0,0,0,0.8);
            border-top: 1px solid rgba(255,157,0,0.3);
            border-bottom: 1px solid rgba(255,157,0,0.3);
            animation: slideInRight 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-shadow: 0 0 5px var(--c-accent);
            display: flex; align-items: center; gap: 10px;
        }
        
        .sys-msg::before {
            content: '!'; display: inline-flex; align-items: center; justify-content: center;
            width: 20px; height: 20px; background: var(--c-accent); color: #000;
            font-weight: bold; border-radius: 50%;
        }

        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        @keyframes torch-flicker {
            0% { opacity: 0.8; transform: translateY(0); filter: drop-shadow(0 0 2px #ffeb3b); }
            100% { opacity: 1; transform: translateY(-1px); filter: drop-shadow(0 0 10px #ffeb3b); }
        }
        .torch-anim { animation: torch-flicker 0.05s infinite alternate; }

        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
                grid-template-rows: 60px 1fr 60px;
                padding: 5px; gap: 5px;
            }
            .sidebar { grid-area: 3 / 1 / 4 / 2; flex-direction: row; justify-content: space-around; background: #000; border-top: 1px solid var(--c-border); padding: 5px; z-index: 100; }
            .top-header { grid-area: 1 / 1 / 2 / 2; }
            .main-view { grid-area: 2 / 1 / 3 / 2; }
            .data-stream, .brand, .sys-info, #cursor-wrapper { display: none; }
            * { cursor: auto !important; }
            #boot-screen { display: none; }
            .app-container { opacity: 1; }
            
            .nav-menu { flex-direction: row; width: 100%; gap: 2px; }
            .nav-btn { flex-grow: 1; padding: 0; justify-content: center; font-size: 0.7rem; border: none; flex-direction: column; gap: 2px;}
            .nav-btn .icon { display: none; }
            .nav-btn:hover { padding: 0; }
        }
    </style>
</head>

<body>

    <div id="boot-screen">
        <div id="boot-log"></div>
    </div>

    <div id="screen-wrapper">
        
        <div id="cursor-wrapper">
            <div id="cursor-outer">
                <div class="cursor-group-outer">
                    <div class="c-corner tl"></div>
                    <div class="c-corner tr"></div>
                    <div class="c-corner bl"></div>
                    <div class="c-corner br"></div>
                </div>
            </div>
            <div id="cursor-inner">
                <div class="cursor-group-inner">
                    <div class="c-corner tl"></div>
                    <div class="c-corner tr"></div>
                    <div class="c-corner bl"></div>
                    <div class="c-corner br"></div>
                </div>
            </div>
        </div>
        
        <div id="hex-grid" class="layer"></div>
        <div id="bg-grid" class="layer"></div>
        <div id="scanline" class="layer"></div>
        <div id="vignette" class="layer"></div>
        <div id="noise-layer"></div>
        <canvas id="particle-canvas" class="layer"></canvas>

        <div id="notification-area"></div>

        <div class="app-container">

            <aside class="sidebar tech-border">
                <div class="brand">
                    <div class="brand-logo">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="var(--c-accent)"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    </div>
                    <div class="brand-text">
                        <h1 class="scramble-text" data-val="TORCH">TORCH</h1>
                        <span>SYSTEM_ONLINE</span>
                    </div>
                </div>

                <nav class="nav-menu">
                    <button class="nav-btn active" onclick="switchView('terminal')" data-val="TERMINAL">
                        <div class="btn-content"><span class="icon">►</span> TERMINAL</div>
                    </button>
                    <button class="nav-btn" onclick="switchView('resources')" data-val="INTEL_DB">
                         <div class="btn-content"><span class="icon">►</span> INTEL_DB</div>
                    </button>
                    <button class="nav-btn" onclick="switchView('writeups')" data-val="WRITEUPS">
                         <div class="btn-content"><span class="icon">►</span> WRITEUPS</div>
                    </button>
                    <button class="nav-btn" onclick="switchView('map')" data-val="GLOBAL_MAP">
                         <div class="btn-content"><span class="icon">►</span> GLOBAL_MAP</div>
                    </button>
                    <button class="nav-btn" onclick="switchView('identity')" data-val="IDENTITY">
                         <div class="btn-content"><span class="icon">►</span> IDENTITY</div>
                    </button>
                </nav>

                <div class="sys-info">
                    <div class="sys-row"><span>UPTIME</span><span class="sys-val" id="uptime">00:00:00</span></div>
                    <div class="sys-row"><span>NET_STATUS</span><span class="sys-val" style="color:var(--c-accent)">ENCRYPTED_V2</span></div>
                    <div class="sys-row"><span>SEC_LEVEL</span><span class="sys-val" id="sec-status">MAXIMUM</span></div>
                    <div class="sys-row"><span>RAM_USAGE</span><span class="sys-val" id="ram-val">42%</span></div>
                </div>
            </aside>

            <header class="top-header tech-border">
                <div class="breadcrumbs" id="breadcrumbs">
                    SYSTEM <span style="margin:0 5px;">//</span> ROOT <span style="margin:0 5px;">//</span> <span id="bread-active" class="scramble-text" data-val="TERMINAL" style="color:#fff">TERMINAL</span>
                </div>
                <div class="status-bar">
                    <div class="status-item">IP_ADDR <span id="ip-display">192.168.X.X</span></div>
                    <div class="status-item">LOC_TIME <span id="time-display">00:00</span></div>
                </div>
            </header>

            <main class="main-view tech-border">
                
                <div id="view-terminal" class="view-panel active">
                    <div id="term-wrapper">
                        <div id="term-output"></div>
                        <div id="nano-container" style="display:none; flex-direction:column; height:100%; border:1px solid #444; background:#000;">
                            <div style="background:var(--c-accent); color:#000; padding:2px 5px; font-size:0.8rem; display:flex; justify-content:space-between; font-weight:bold;">
                                <span>GNU nano</span> <span id="nano-filename"></span> <span>Mod</span>
                            </div>
                            <textarea id="nano-textarea" style="flex:1; background:transparent; border:none; color:#ccc; padding:10px; resize:none; outline:none; font-family:inherit;"></textarea>
                            <div style="background:var(--c-accent); color:#000; padding:2px 5px; font-size:0.8rem; display:flex; justify-content:space-between; font-weight:bold;">
                                <span>^S Write</span> <span>^X Exit</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="view-resources" class="view-panel">
                    <div class="res-nav-bar">
                        <button class="res-tab active" onclick="filterRes('all')">ALL</button>
                        <button class="res-tab" onclick="filterRes('web')">WEB</button>
                        <button class="res-tab" onclick="filterRes('ctf')">CTF</button>
                        <button class="res-tab" onclick="filterRes('red')">RED</button>
                        <button class="res-tab" onclick="filterRes('tools')">TOOLS</button>
                        <button class="res-tab" id="tab-admin" onclick="filterRes('admin')" style="display:none;">ADMIN</button>
                    </div>
                    <div class="res-content">
                        <div class="res-grid" id="res-grid-container"></div>
                    </div>
                </div>

                 <div id="view-writeups" class="view-panel">
                    <div class="res-content">
                        <h2 style="font-family:var(--font-disp); color:#fff; font-size:1.5rem; margin-bottom:20px; border-bottom:1px solid var(--c-accent);">MISSION LOGS // WRITEUPS</h2>
                        <div class="res-grid">
                            
                        </div>
                    </div>
                </div>

                <div id="view-map" class="view-panel" style="background:rgba(10,15,20,0.6);">
                    <div id="map-container"></div>
                </div>

                <div id="view-identity" class="view-panel">
                    <div class="id-container">
                        <div id="id-locked">
                            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#555" stroke-width="1.5" style="margin-bottom:30px; filter:drop-shadow(0 0 10px #555);">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <h2 style="font-family:var(--font-disp); letter-spacing:4px; color:#555; font-size:1.5rem; margin-bottom:20px;">BIO-METRIC LOCK</h2>
                            <div style="display:flex; gap:0;">
                                <input type="password" id="gui-pin" placeholder="PIN CODE" style="background:rgba(255,255,255,0.05); border:1px solid #444; padding:10px; color:#fff; text-align:center; font-family:var(--font-mono); width:140px; outline:none; letter-spacing:2px;">
                                <button onclick="checkPin()" style="background:var(--c-accent); border:none; color:#000; padding:0 20px; font-weight:900; cursor:pointer; box-shadow:0 0 15px var(--c-accent);">></button>
                            </div>
                            <div style="font-size:0.7rem; color:#444; margin-top:15px; text-transform:uppercase;">Hint: Check ~/.pin_code</div>
                        </div>

                        <div id="id-unlocked" style="display:none; width:100%; align-items:center; flex-direction:column;">
                            <div class="profile-img">
                                <svg width="100%" height="100%" viewBox="0 0 10 20">
                                    <rect x="4" y="9" width="2" height="10" fill="#5d4037" />
                                    <rect x="3" y="6" width="4" height="3" fill="#3e2723" />
                                    <rect x="4" y="4" width="2" height="2" fill="#ff5722" />
                                    <rect x="4" y="2" width="2" height="2" fill="#ffeb3b" class="torch-anim" />
                                </svg>
                            </div>
                            <h1 class="scramble-text" data-val="TORCH" style="font-family:var(--font-disp); font-size:3rem; line-height:1; text-shadow:0 0 20px rgba(255,255,255,0.8);">TORCH</h1>
                            
                            <div class="social-list">
                                <a href="https://github.com/Torch4084" target="_blank" class="social-btn">
                                    <span>GITHUB</span><span>@Torch4084</span>
                                </a>
                                <a href="https://discord.com/users/1177684089139114048" target="_blank" class="social-btn">
                                    <span>DISCORD</span><span>Torch4084</span>
                                </a>
                                <a href="https://t.me/torch4084" target="_blank" class="social-btn">
                                    <span>TELEGRAM</span><span>@Torch4084</span>
                                </a>
                                <div class="social-btn" onclick="copyEmail()" style="cursor:pointer">
                                    <span>EMAIL</span><span>COPY ADDR</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </main>

            <div class="data-stream tech-border">
                <div class="stream-inner">
                    0F 3A 2B 99 1C 4D 5E 77 8A 00 1B 2C 3D 4E 5F 60 71 82 93 A4 B5 C6 D7 E8 F9 0A 1B 2C 3D 4E 5F 60 71 82 93 A4 B5 C6 D7 E8 F9 0F 3A 2B 99 1C 4D 5E 77 8A 00 1B 2C 3D 4E 5F 60 71 82 93 A4 B5 C6 D7 E8 F9
                </div>
            </div>

        </div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        const fileSystem = {
            '/': ['bin', 'etc', 'home', 'usr', 'var', 'root'],
            '/home': ['torch'],
            '/home/torch': ['readme.txt', '.pin_code'],
            '/bin': ['bash', 'ls', 'cat', 'neofetch', 'whoami', 'nano', 'scan', 'unlock', 'help', 'clear'],
            '/etc': ['passwd', 'hostname', 'os-release'],
            '/root': ['flag.txt'],
            '/usr/share/resources': ['(Access via INTEL_DB tab)'],
            '/writeups': []
        };

        const fileContents = {
            '/etc/passwd': 'root:x:0:0:root:/root:/bin/bash\ntorch:x:1000:1000:torch:/home/torch:/bin/bash',
            '/home/torch/readme.txt': 'SYSTEM NOTICE:\nSecure terminal environment active.\nExplore directories for intel.',
            '/home/torch/.pin_code': 'PIN: 4084',
            '/root/flag.txt': 'JSEC{UNL0CK3D_THE_M4TR1X}'
        };
        
        const resources = [
            { cat: 'web', title: 'PortSwigger', desc: 'Web Security Academy', tag: 'LEARN', link: 'https://portswigger.net/web-security' },
            { cat: 'web', title: 'OWASP Top 10', desc: 'Critical Security Risks', tag: 'REF', link: 'https://owasp.org/www-project-top-ten/' },
            { cat: 'web', title: 'Juice Shop', desc: 'Vulnerable App', tag: 'LAB', link: 'https://owasp.org/www-project-juice-shop/' },
            { cat: 'ctf', title: 'Hack The Box', desc: 'Pen-testing Labs', tag: 'LAB', link: 'https://www.hackthebox.com/' },
            { cat: 'ctf', title: 'TryHackMe', desc: 'Guided Learning', tag: 'LEARN', link: 'https://tryhackme.com' },
            { cat: 'ctf', title: 'CTFtime', desc: 'Event Tracker', tag: 'INFO', link: 'https://ctftime.org/' },
            { cat: 'red', title: 'RevShells', desc: 'Payload Generator', tag: 'TOOL', link: 'https://www.revshells.com/' },
            { cat: 'red', title: 'CyberChef', desc: 'The Swiss Army Knife', tag: 'UTIL', link: 'https://gchq.github.io/CyberChef/' },
            { cat: 'red', title: 'GTFOBins', desc: 'Unix Bypass', tag: 'REF', link: 'https://gtfobins.github.io/' },
            { cat: 'tools', title: 'Nmap', desc: 'Network Mapper', tag: 'NET', link: 'https://nmap.org/' },
            { cat: 'tools', title: 'Metasploit', desc: 'Exploit Framework', tag: 'FW', link: 'https://www.metasploit.com/' },
            { cat: 'admin', title: 'ROOT SHELL', desc: 'Access Granted', tag: 'SUPER', link: '#' },
            { cat: 'admin', title: 'ZERO-DAY DB', desc: 'Internal Only', tag: 'RESTR', link: '#' }
        ];

        let currentDir = '/home/torch';
        let commandHistory = [];
        let historyIndex = -1;
        let isRoot = false;
        let mapInited = false;
        let nanoMode = false;
        let nanoFile = "";

        function initBootSequence() {
            const bootScreen = document.getElementById('boot-screen');
            const bootLog = document.getElementById('boot-log');
            const app = document.querySelector('.app-container');
            const logs = [
                "Initializing Core Kernel...",
                "Loading Modules: NET, CRYPTO, UI...",
                "Bypassing Security Protocols...",
                "Mounting Virtual Filesystem...",
                "Establishing Secure Tunnel...",
                "Identity Verification: SUCCESS",
                "Welcome, Operator."
            ];
            
            let delay = 0;
            if (window.innerWidth <= 768) {
                bootScreen.style.display = 'none';
                app.style.opacity = '1';
                initTerm();
                return;
            }

            logs.forEach((log, index) => {
                delay += Math.random() * 300 + 200;
                setTimeout(() => {
                    const ln = document.createElement('div');
                    ln.className = 'boot-line';
                    ln.innerText = `> ${log}`;
                    bootLog.appendChild(ln);
                }, delay);
            });

            setTimeout(() => {
                bootScreen.style.opacity = '0';
                setTimeout(() => {
                    bootScreen.style.display = 'none';
                    app.style.opacity = '1';
                    app.classList.add('crt-on');
                    initTerm();
                }, 500);
            }, delay + 800);
        }

        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&';
        function scramble(element, final) {
            let iterations = 0;
            const interval = setInterval(() => {
                element.innerText = final.split('')
                    .map((letter, index) => {
                        if(index < iterations) return final[index];
                        return chars[Math.floor(Math.random() * chars.length)];
                    }).join('');
                if(iterations >= final.length) clearInterval(interval);
                iterations += 1/2;
            }, 30);
        }

        document.querySelectorAll('.scramble-text').forEach(el => {
            scramble(el, el.getAttribute('data-val'));
        });
        
        setInterval(() => {
            const h = document.querySelector('.brand-text h1');
            if(Math.random() > 0.8) scramble(h, "TORCH");
        }, 5000);

        const cursorOuter = document.getElementById('cursor-outer');
        const cursorInner = document.getElementById('cursor-inner');
        const sparks = [];
        let mouseX = window.innerWidth / 2, mouseY = window.innerHeight / 2;
        let outerX = mouseX, outerY = mouseY;
        let innerX = mouseX, innerY = mouseY;
        let isSnapped = false;
        let snapTarget = null;
        
        let lastX = mouseX, lastY = mouseY;
        let velX = 0, velY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            velX = mouseX - lastX;
            velY = mouseY - lastY;
            lastX = mouseX;
            lastY = mouseY;
            
            const speed = Math.sqrt(velX*velX + velY*velY);
            
            const blurAmount = Math.min(speed * 0.05, 4);
            cursorInner.style.filter = blurAmount > 0.5 ? `blur(${blurAmount}px)` : 'none';

            const xPct = (mouseX / window.innerWidth) - 0.5;
            const yPct = (mouseY / window.innerHeight) - 0.5;
            document.getElementById('bg-grid').style.transform = 
                `perspective(600px) rotateX(${25 + yPct * 5}deg) rotateY(${xPct * 5}deg) scale(1.5)`;

            if(Math.random() > 0.8) {
                sparks.push({x: mouseX, y: mouseY, alpha: 1, size: Math.random() * 2, vx: (Math.random()-0.5), vy: (Math.random()-0.5)});
            }
            
            cursorInner.style.transform = `translate3d(${mouseX}px, ${mouseY}px, 0) translate(-50%, -50%)`;
        });

        document.addEventListener('mousedown', () => document.body.classList.add('clicking'));
        document.addEventListener('mouseup', () => document.body.classList.remove('clicking'));

        document.addEventListener('mouseover', (e) => {
            const target = e.target.closest('a, button, input, .nav-btn, .res-card, .social-btn');
            if (target) {
                isSnapped = true;
                snapTarget = target;
                cursorOuter.classList.add('locked');
            }
        });
        
        document.addEventListener('mouseout', (e) => {
            const target = e.target.closest('a, button, input, .nav-btn, .res-card, .social-btn');
            if (target && target === snapTarget) {
                isSnapped = false;
                snapTarget = null;
                cursorOuter.classList.remove('locked');
            }
        });

        document.addEventListener('click', (e) => {
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            ripple.style.left = e.clientX + 'px';
            ripple.style.top = e.clientY + 'px';
            document.body.appendChild(ripple);
            setTimeout(() => ripple.remove(), 500); 
        });

        function switchView(id) {
            if (id === 'writeups') {
                window.location.href = 'writeups.html'; 
                return;
            }

            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            const activeBtn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.innerText.toLowerCase().includes(id.split('_')[0]));
            if(activeBtn) activeBtn.classList.add('active');

            const bread = document.getElementById('bread-active');
            bread.setAttribute('data-val', id.toUpperCase());
            scramble(bread, id.toUpperCase());
            bread.style.color = isRoot ? '#ff3333' : '#fff';

            document.querySelectorAll('.view-panel').forEach(p => p.classList.remove('active'));
            const targetPanel = document.getElementById(`view-${id}`);
            if (targetPanel) targetPanel.classList.add('active');

            if (id === 'terminal' && window.innerWidth > 768) setTimeout(()=>document.querySelector('.inp')?.focus(), 50);
            if (id === 'resources') renderResources('all');
            if (id === 'map' && !mapInited) initMap();
        }

        function updateTime() {
            const now = new Date();
            document.getElementById('time-display').innerText = now.toLocaleTimeString('en-US', {hour12:false, hour:'2-digit', minute:'2-digit'});
            
            const t = performance.now();
            const h = Math.floor(t/3600000).toString().padStart(2,'0');
            const m = Math.floor((t%3600000)/60000).toString().padStart(2,'0');
            const s = Math.floor((t%60000)/1000).toString().padStart(2,'0');
            document.getElementById('uptime').innerText = `${h}:${m}:${s}`;

            const ram = 30 + Math.floor(Math.random() * 20);
            document.getElementById('ram-val').innerText = `${ram}%`;
        }
        setInterval(updateTime, 1000); updateTime();

        const termOutput = document.getElementById('term-output');
        
        function typeText(element, text, speed = 10) {
            let i = 0;
            const timer = setInterval(() => {
                element.innerHTML += text.charAt(i);
                i++;
                if (i > text.length - 1) clearInterval(timer);
                document.getElementById('term-wrapper').scrollTop = document.getElementById('term-wrapper').scrollHeight;
            }, speed);
        }

        function termInput() {
            if (nanoMode) return;
            const row = document.createElement('div');
            row.className = 'ln';
            const user = isRoot ? 'root' : 'torch';
            const sym = isRoot ? '#' : '$';
            const color = isRoot ? '#ff3333' : 'var(--c-accent)';
            
            row.innerHTML = `<span class="pr" style="color:${color}">${user}@sys:${currentDir} ${sym}</span><input class="inp" spellcheck="false" autocomplete="off">`;
            termOutput.appendChild(row);
            
            const input = row.querySelector('input');
            input.focus();
            
            input.addEventListener('keydown', (e) => {
                if(e.key === 'Enter') {
                    const cmd = input.value.trim();
                    input.disabled = true;
                    if(cmd) {
                        commandHistory.push(cmd);
                        historyIndex = commandHistory.length;
                        exec(cmd);
                    }
                    termInput();
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if(historyIndex > 0) { historyIndex--; input.value = commandHistory[historyIndex]; }
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if(historyIndex < commandHistory.length - 1) { historyIndex++; input.value = commandHistory[historyIndex]; }
                    else { historyIndex = commandHistory.length; input.value = ''; }
                }
            });
            document.getElementById('term-wrapper').scrollTop = document.getElementById('term-wrapper').scrollHeight;
        }

        function log(text, color='#ccc') {
            const d = document.createElement('div');
            d.className = 'ln';
            d.style.color = color;
            d.innerText = text;
            termOutput.appendChild(d);
            document.getElementById('term-wrapper').scrollTop = document.getElementById('term-wrapper').scrollHeight;
        }

        function initTerm() {
            const d1 = document.createElement('div');
            d1.className = 'ln'; d1.style.color = '#666';
            termOutput.appendChild(d1);
            typeText(d1, "System Ready.", 10);
            
            setTimeout(() => {
                const d3 = document.createElement('div');
                d3.className = 'ln'; d3.style.marginBottom = '10px';
                termOutput.appendChild(d3);
                d3.innerHTML = `Welcome, User. Type <span style="color:var(--c-accent)">help</span> for commands.`;
                termInput();
            }, 500);
        }

        function exec(cmdStr) {
            const parts = cmdStr.split(' ');
            const cmd = parts[0].toLowerCase();
            const args = parts.slice(1);

            switch(cmd) {
                case 'help': log('Available: ls, cd, cat, whoami, clear, nano, scan, unlock, help'); break;
                case 'clear': termOutput.innerHTML = ''; break;
                case 'whoami': log(isRoot ? 'root' : 'torch'); break;
                case 'scan': 
                    log('Initializing port scan on 127.0.0.1...', '#fbbf24');
                    setTimeout(() => log('22/tcp  OPEN  (SSH)\n80/tcp  OPEN  (HTTP)\n443/tcp OPEN  (HTTPS)', '#4ade80'), 800);
                    break;
                case 'ls': 
                    const dir = args[0] ? (args[0].startsWith('/') ? args[0] : currentDir + '/' + args[0]) : currentDir;
                    const cleanDir = dir.replace('//','/'); 
                    if(fileSystem[cleanDir]) log(fileSystem[cleanDir].join('  '), '#4ade80');
                    else log(`ls: cannot access '${cleanDir}': No such file or directory`, '#f87171');
                    break;
                case 'cat':
                    const f = args[0] ? (args[0].startsWith('/') ? args[0] : currentDir + '/' + args[0]) : '';
                     if(fileContents[f]) log(fileContents[f]);
                     else log('cat: file not found', '#f87171');
                     break;
                case 'cd':
                    if(!args[0] || args[0] === '~') currentDir = '/home/torch';
                    else if(args[0] === '..') currentDir = currentDir.split('/').slice(0,-1).join('/') || '/';
                    else {
                        const target = args[0].startsWith('/') ? args[0] : (currentDir === '/' ? '' : currentDir) + '/' + args[0];
                        if(fileSystem[target]) currentDir = target;
                        else log(`bash: cd: ${args[0]}: No such file or directory`, '#f87171');
                    }
                    break;
                case 'unlock':
                    if(args[0] === '4084') unlockSystem();
                    else log('Access Denied: Invalid PIN', '#f87171');
                    break;
                case 'sudo':
                    if(args[0] === 'su') {
                         log('Password required (Simulated). Using override...', '#aaa');
                         setTimeout(enableRoot, 1000);
                    } else log('usage: sudo su');
                    break;
                default: log(`bash: ${cmd}: command not found`, '#f87171');
            }
        }

        function renderResources(filter) {
            const grid = document.getElementById('res-grid-container');
            grid.innerHTML = '';
            
            document.querySelectorAll('.res-tab').forEach(t => t.classList.remove('active'));
            const activeTab = Array.from(document.querySelectorAll('.res-tab')).find(t => t.innerText.toLowerCase().includes(filter));
            if(activeTab) activeTab.classList.add('active');

            resources.forEach((r, index) => {
                if(filter === 'all' || r.cat === filter) {
                    if(r.cat === 'admin' && !isRoot) return;
                    
                    const card = document.createElement('a');
                    card.className = 'res-card';
                    card.href = r.link;
                    card.target = "_blank";
                    card.style.animationDelay = `${index * 50}ms`;
                    
                    if(r.cat === 'admin') card.style.borderColor = '#ff3333';
                    
                    card.innerHTML = `
                        <span class="tag" style="background:${r.cat==='admin'?'#ff3333':'var(--c-accent)'}">${r.tag}</span>
                        <h4 style="color:${r.cat==='admin'?'#ff3333':'#fff'}">${r.title}</h4>
                        <p>${r.desc}</p>
                    `;
                    grid.appendChild(card);
                }
            });
        }

        function checkPin() {
            const pin = document.getElementById('gui-pin').value;
            if(pin === '4084') unlockSystem();
            else {
                document.getElementById('gui-pin').value = '';
                notify('ACCESS DENIED', true);
            }
        }

        function unlockSystem() {
            document.getElementById('id-locked').style.display = 'none';
            document.getElementById('id-unlocked').style.display = 'flex';
            notify('IDENTITY VERIFIED');
            switchView('identity');
        }
        
        function enableRoot() {
            isRoot = true;
            document.documentElement.style.setProperty('--c-accent', '#ff3333');
            document.documentElement.style.setProperty('--c-accent-dim', 'rgba(255,51,51,0.2)');
            document.getElementById('sec-status').innerText = "ELEVATED";
            document.getElementById('sec-status').style.color = "#ff3333";
            document.getElementById('tab-admin').style.display = 'block';
            notify('ROOT PRIVILEGES GRANTED', true);
            log('Root access granted.', '#ff3333');
        }

        function notify(msg, alert=false) {
            const area = document.getElementById('notification-area');
            const div = document.createElement('div');
            div.className = 'sys-msg';
            div.innerHTML = `${msg}`;
            if(alert) {
                div.style.borderRightColor = '#ff3333';
                div.style.color = '#ff3333';
            }
            area.appendChild(div);
            setTimeout(() => div.remove(), 4000);
        }
        
        function copyEmail() {
             const el = document.createElement('textarea');
             el.value = 'torch@t0rch.xyz';
             document.body.appendChild(el);
             el.select();
             document.execCommand('copy');
             document.body.removeChild(el);
             notify('EMAIL COPIED TO CLIPBOARD');
        }

        function initMap() {
            if (typeof jsVectorMap === 'undefined') return;
            document.getElementById('map-container').innerHTML = '';
            try {
                new jsVectorMap({
                    selector: '#map-container',
                    map: 'world',
                    backgroundColor: 'transparent',
                    regionStyle: {
                        initial: { fill: '#222', stroke: '#111', strokeWidth: 0.5, fillOpacity: 1 },
                        hover: { fill: '#ff9d00', cursor: 'pointer' },
                        selected: { fill: '#4ade80' }
                    },
                    selectedRegions: ['JO'],
                    onLoaded(map) {
                        const svg = document.querySelector('#map-container svg');
                        const regionsGroup = svg ? svg.querySelector('#jvm-regions-group') : null;
                        if (regionsGroup) {
                            const etPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                            etPath.setAttribute('d', 'M605.8,180.7L606.27,180.62L606.38,180.39L606.51,180.28L606.45,179.86L606.26,179.65L606.41,179.44L606.63,178.94L607.08,178.77L607.51,178.8L608.85,178.1L608.82,178.12L608.87,178.04L608.85,177.94L608.69,177.77L608.78,177.57L609.14,177.76L609.32,177.77L609.49,177.71L609.65,177.78L610.53,177.21L610.63,177.57L610.76,177.71L610.69,177.93L610.81,178.2L611.42,178.2L611.6,178.01L611.84,177.92L612.07,177.98L612.29,177.79L612.36,178.01L612.46,178.06L612.89,177.78L613.1,177.39L613.24,177.29L613.34,176.78L613.61,176.55L613.63,176.25L613.85,176.07L614.18,175.99L614.45,176.08L614.99,176.06L615.42,176.17L615.81,176.12L616.25,175.93L616.87,176.0L617.15,175.78L617.4,175.41L617.6,175.27L617.61,174.98L617.97,174.76L618.24,174.69L618.35,174.52L619.68,173.93L619.9,173.77L620.17,173.8L620.72,173.52L621.08,173.47L621.19,173.37L621.31,173.11L621.5,173.06L622.12,173.06L622.3,173.0L622.38,172.8L622.28,172.52L622.37,172.45L622.41,172.33L622.23,171.74L622.26,171.57L622.14,171.37L622.09,171.13L622.34,170.65L622.53,170.66L623.02,170.5L623.11,170.42L623.12,170.31L623.06,170.23L622.72,170.12L622.64,170.0L623.23,169.7L623.43,169.78L623.59,169.78L623.69,169.69L623.72,169.57L623.59,169.16L623.36,169.03L623.51,168.77L623.51,168.62L622.92,167.24L622.79,167.04L622.74,166.81L622.59,166.61L622.67,166.28L622.56,165.6L622.69,165.16L622.63,165.01L622.94,164.89L622.96,164.73L622.29,164.41L621.67,164.48L621.38,164.33L621.37,164.26L621.94,163.88L622.21,163.9L622.66,163.84L622.81,163.65L623.03,163.66L623.43,163.53L623.83,163.58L625.55,163.07L625.84,162.9L625.99,162.93L626.03,162.99L626.12,163.36L626.53,163.53L627.29,163.26L627.49,163.33L627.84,163.61L628.08,163.56L628.28,163.15L628.32,162.58L628.24,162.49L627.99,162.4L627.6,162.35L627.48,162.24L627.67,161.66L627.97,161.13L628.17,160.21L628.43,159.78L628.84,158.52L629.21,157.86L629.29,157.06L629.53,157.05L630.48,157.51L631.43,157.8L631.87,157.83L632.1,157.74L632.35,157.72L632.73,157.74L632.98,157.82L633.33,157.77L633.5,157.93L633.41,158.19L633.46,158.28L633.55,158.31L634.02,158.18L634.17,158.02L634.35,157.97L634.6,157.78L634.78,157.59L635.5,157.52L635.64,157.13L635.89,157.05L635.96,156.8L635.96,156.48L635.72,156.07L635.75,155.66L635.55,154.73L635.73,154.05L636.05,153.36L636.18,153.24L636.71,153.17L637.2,153.2L637.5,152.99L637.8,152.99L638.15,152.84L638.27,152.63L638.64,152.21L638.62,151.98L638.73,151.75L638.61,151.61L638.54,151.42L638.87,150.99L639.16,151.03L639.5,150.92L640.21,151.1L640.42,151.04L640.5,150.94L641.19,150.8L641.19,151.18L641.32,151.28L641.32,151.33L641.04,151.48L640.98,151.69L641.14,151.82L641.22,152.01L641.45,152.11L641.62,152.11L641.79,152.24L641.5,152.57L641.62,152.76L641.84,152.8L642.1,152.96L642.28,152.96L642.44,153.03L642.72,153.27L642.93,153.28L643.06,153.41L643.04,153.62L643.15,153.89L643.28,153.98L643.45,154.0L643.69,154.2L643.97,154.2L644.3,154.56L644.77,154.62L645.11,154.42L645.27,154.47L645.55,154.45L645.63,154.65L645.73,154.71L645.82,154.86L645.97,154.91L646.08,155.1L646.46,155.1L646.57,155.06L646.63,154.91L646.8,154.93L646.78,155.1L646.87,155.31L647.1,155.47L647.5,155.6L647.47,155.71L647.61,155.99L647.75,156.12L647.77,156.39L647.87,156.48L647.83,156.71L648.45,157.66L648.87,157.86L648.99,158.08L648.96,158.26L649.17,158.5L649.14,158.93L649.26,159.04L648.89,159.86L649.02,160.29L649.14,160.47L649.15,160.72L648.43,161.54L648.27,162.37L648.53,162.63L648.64,163.03L648.81,163.14L648.84,163.36L648.98,163.4L649.17,163.31L649.45,163.32L649.83,163.57L650.14,163.62L650.3,163.52L650.56,163.75L650.88,163.79L651.82,163.74L652.19,163.93L652.91,163.98L653.85,163.86L654.08,163.96L654.62,163.95L654.83,164.03L655.06,164.02L655.26,164.11L655.52,164.13L655.96,164.35L656.5,164.97L656.87,165.05L657.16,165.02L657.38,165.22L657.53,165.46L657.79,165.51L658.17,165.71L658.45,166.0L659.32,166.27L660.13,166.18L659.98,166.5L659.98,166.97L660.04,167.03L660.52,167.16L660.91,168.15L661.26,168.82L661.37,169.31L662.43,170.29L662.52,170.45L662.56,170.86L661.94,171.23L661.81,171.4L661.72,172.64L661.79,173.01L661.36,173.44L661.17,173.5L660.46,173.42L659.37,173.63L658.16,174.24L656.71,175.7L655.63,177.23L654.94,177.56L654.32,177.5L654.18,177.51L654.02,177.6L653.95,178.72L653.61,179.26L653.57,179.42L653.6,179.6L654.04,180.67L654.0,181.44L652.62,181.71L652.31,181.93L652.01,182.06L650.79,182.4L650.37,182.44L649.95,182.63L649.25,182.77L648.36,182.83L648.29,182.88L648.26,183.01L647.64,183.4L647.5,183.45L647.22,183.44L647.06,183.54L647.03,183.69L647.14,183.95L647.76,184.91L647.78,185.1L647.67,185.37L647.72,185.52L648.77,186.07L649.04,186.3L649.39,186.42L649.57,186.93L649.96,187.47L649.97,187.6L649.92,187.65L649.68,187.69L649.21,187.89L648.95,187.87L648.76,187.92L648.4,188.33L648.37,188.63L648.45,188.85L648.71,189.09L649.18,189.22L649.5,190.24L649.47,190.35L648.94,190.54L648.82,190.53L648.3,190.24L647.14,190.19L646.98,189.95L646.79,189.82L646.69,189.89L646.55,190.34L646.39,190.37L645.93,190.33L644.81,189.81L644.19,189.77L643.84,189.5L643.5,189.5L643.05,189.37L642.92,189.28L642.71,189.25L641.7,189.33L641.41,189.5L640.64,189.6L640.07,189.48L639.65,189.69L638.66,189.81L638.35,189.93L637.87,189.92L637.7,190.06L637.36,190.14L637.19,190.24L637.11,190.5L636.97,190.65L636.87,190.94L636.57,191.23L636.01,191.22L635.64,191.53L635.56,191.38L635.32,191.26L635.12,191.25L634.88,191.32L634.56,191.27L633.99,191.44L633.62,191.7L633.08,191.81L632.12,192.33L631.72,192.21L631.36,192.34L630.73,192.38L629.77,192.2L629.51,192.25L629.18,192.03L629.2,191.7L629.13,191.55L628.99,191.46L628.76,191.43L628.46,191.55L627.7,191.45L627.46,191.59L627.37,191.87L626.83,192.16L626.66,192.5L625.96,192.7L625.7,192.72L625.25,192.47L624.73,192.5L624.36,192.29L624.24,192.36L624.21,192.56L624.15,192.57L623.89,192.42L623.59,192.42L623.38,192.31L622.93,192.26L622.4,191.9L622.26,192.0L622.26,192.26L622.04,192.76L621.67,193.16L621.65,193.26L621.72,193.46L621.46,193.54L621.32,193.68L621.32,193.8L621.4,194.04L621.51,194.2L621.51,194.31L621.11,195.03L620.99,195.06L620.71,194.94L620.37,194.9L620.02,195.01L619.67,194.99L619.09,195.25L618.73,195.07L618.36,194.75L617.64,194.6L617.47,194.49L617.27,193.87L617.11,193.61L617.06,193.27L616.75,192.69L616.88,192.2L616.85,192.05L616.79,192.0L616.61,192.0L616.38,192.17L616.12,191.98L615.82,192.1L615.45,192.04L615.2,192.07L614.88,191.9L614.54,191.91L614.29,191.74L613.98,191.74L613.8,191.58L613.6,191.56L613.4,191.38L613.15,191.28L613.15,190.99L613.12,190.9L613.03,190.84L612.71,190.97L612.65,191.04L612.11,191.11L611.95,190.65L611.59,190.54L611.49,190.42L611.48,190.34L611.66,190.21L611.67,190.07L611.77,189.95L611.66,189.74L611.68,189.28L611.34,188.72L610.8,188.39L610.57,188.36L610.28,188.48L610.17,188.03L609.98,187.89L609.68,187.84L609.43,187.7L609.01,187.75L608.87,187.85L608.69,187.65L608.49,187.64L608.37,187.54L608.01,187.61L607.91,187.47L607.67,187.34L607.84,187.3L607.94,187.15L608.25,187.15L608.48,186.97L608.62,187.19L608.93,187.15L609.07,187.0L609.36,186.91L609.45,186.71L609.6,186.66L609.62,186.54L608.96,185.99L608.95,185.89L609.15,185.52L609.12,185.43L608.96,185.33L609.02,185.22L608.97,185.13L608.94,184.77L608.71,184.6L608.67,184.02L608.83,183.77L608.83,183.52L608.61,183.29L608.44,183.27L608.31,183.16L607.51,182.85L607.23,182.9L606.94,182.85L606.83,183.02L606.72,183.06L606.73,183.26L606.52,183.25L606.25,183.1L606.07,182.73L606.06,182.49L605.94,182.32L606.0,182.24L606.24,182.19L606.3,182.0L605.99,181.7L605.91,181.49L605.75,181.31L605.84,180.92L605.81,180.69Z');
                            etPath.setAttribute('data-code', 'XJ');
                            etPath.style.setProperty('stroke', '#101316', 'important');
                            etPath.style.setProperty('stroke-width', '0.6px', 'important');
                            etPath.style.setProperty('fill', '#222', 'important'); 
                            etPath.style.setProperty('fill-opacity', '1', 'important');
                            etPath.style.cursor = 'pointer';
                            regionsGroup.appendChild(etPath);

                            etPath.addEventListener('mouseenter', function (e) {
                                this.style.setProperty('fill', '#ff9d00', 'important');
                                this.style.setProperty('fill-opacity', '1', 'important');
                                const tooltip = document.querySelector('.jvm-tooltip');
                                if (tooltip) {
                                    tooltip.textContent = 'East Turkestan';
                                    tooltip.style.display = 'block';
                                    tooltip.style.left = (e.pageX + 10) + 'px';
                                    tooltip.style.top = (e.pageY - 25) + 'px';
                                }
                            });

                            etPath.addEventListener('mousemove', function (e) {
                                const tooltip = document.querySelector('.jvm-tooltip');
                                if (tooltip) {
                                    tooltip.style.left = (e.pageX + 10) + 'px';
                                    tooltip.style.top = (e.pageY - 25) + 'px';
                                }
                            });

                            etPath.addEventListener('mouseleave', function () {
                                this.style.setProperty('fill', '#222', 'important'); 
                                this.style.setProperty('fill-opacity', '1', 'important');
                                const tooltip = document.querySelector('.jvm-tooltip');
                                if (tooltip) {
                                    tooltip.style.display = '';
                                }
                            });
                        }
                    }
                });
                mapInited = true;
            } catch (e) { console.error(e); }
        }

        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [];
        
        function initParticles() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            particles = [];
            for(let i=0; i<150; i++) {
                particles.push({
                    x: Math.random()*width, y: Math.random()*height,
                    vx: (Math.random()-0.5)*0.8, vy: (Math.random()-0.5)*0.8,
                    s: Math.random() * 2 + 0.5
                });
            }
        }

        function animate() {
            let targetX = mouseX;
            let targetY = mouseY;
            let outerScale = 1;

            if (isSnapped && snapTarget) {
                const rect = snapTarget.getBoundingClientRect();
                targetX = rect.left + rect.width / 2;
                targetY = rect.top + rect.height / 2;
                
                const padding = 10;
                cursorOuter.style.width = (rect.width + padding) + 'px';
                cursorOuter.style.height = (rect.height + padding) + 'px';
                cursorOuter.style.borderRadius = getComputedStyle(snapTarget).borderRadius;
            } else {
                cursorOuter.style.width = '40px';
                cursorOuter.style.height = '40px';
                cursorOuter.style.borderRadius = '0';
            }

            outerX += (targetX - outerX) * 0.15;
            outerY += (targetY - outerY) * 0.15;
            
            cursorOuter.style.transform = `translate3d(${outerX}px, ${outerY}px, 0) translate(-50%, -50%)`;

            ctx.clearRect(0,0,width,height);
            const mainColor = isRoot ? '#ff3333' : '#ff9d00';
            const dimColor = isRoot ? 'rgba(255,51,51,0.1)' : 'rgba(255,157,0,0.15)';
            
            for(let i=0; i<sparks.length; i++) {
                let s = sparks[i];
                ctx.fillStyle = `rgba(${isRoot?'255,50,50':'255,200,0'},${s.alpha})`;
                ctx.beginPath(); ctx.arc(s.x, s.y, s.size, 0, Math.PI*2); ctx.fill();
                s.x += s.vx; s.y += s.vy; // Slight movement
                s.alpha -= 0.05;
            }
            while(sparks.length > 0 && sparks[0].alpha <= 0) sparks.shift();

            ctx.fillStyle = mainColor;
            ctx.strokeStyle = dimColor;
            
            for(let i=0; i<particles.length; i++) {
                let p = particles[i];
                p.x += p.vx; p.y += p.vy;
                if(p.x < 0) p.x = width; if(p.x > width) p.x = 0;
                if(p.y < 0) p.y = height; if(p.y > height) p.y = 0;
                
                ctx.globalAlpha = 0.6;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill();

                for(let j=i+1; j<particles.length; j++) {
                    let p2 = particles[j];
                    let dist = Math.sqrt(Math.pow(p.x-p2.x,2) + Math.pow(p.y-p2.y,2));
                    if(dist < 100) {
                        ctx.lineWidth = 1 - (dist/100);
                        ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(p2.x, p2.y); ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animate);
        }
        
        window.addEventListener('resize', initParticles);
        initParticles(); animate();

        initBootSequence();

    </script>
</body>
</html>
