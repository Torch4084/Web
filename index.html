<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TORCH | OS</title>

    <meta name="description"
        content="My personal cyberdeck for hacking tools, CTF resources, and red team ops. Poke around via the interactive terminal to find hidden flags and access restricted databases.">
    <meta name="theme-color" content="#ff9d00">
    <meta property="og:title" content="TORCH | OS">
    <meta property="og:description"
        content="My personal cyberdeck for hacking tools, CTF resources, and red team ops. Poke around via the interactive terminal to find hidden flags and access restricted databases.">
    <meta property="og:type" content="website">
    <meta property="twitter:card" content="summary">

    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 10 20'%3E%3Crect x='4' y='9' width='2' height='10' fill='%235d4037'/%3E%3Crect x='3' y='6' width='4' height='3' fill='%233e2723'/%3E%3Crect x='4' y='4' width='2' height='2' fill='%23ff5722'/%3E%3Crect x='4' y='2' width='2' height='2' fill='%23ffeb3b'/%3E%3C/svg%3E">

    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;500;800&family=Rajdhani:wght@500;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsvectormap/dist/css/jsvectormap.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap/dist/maps/world.js"></script>

    <style>
        :root {
            --c-accent: #ff9d00;
            --c-accent-rgb: 255, 157, 0;
            --c-accent-dim: rgba(255, 157, 0, 0.1);
            --c-bg: #020202;
            --c-glass: rgba(10, 10, 10, 0.7);
            --c-border: rgba(255, 255, 255, 0.1);
            --font-mono: 'JetBrains Mono', monospace;
            --font-disp: 'Rajdhani', sans-serif;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100dvh;
            background-color: var(--c-bg);
            color: #e0e0e0;
            font-family: var(--font-mono);
            overflow: hidden;
            user-select: none;
            transition: background-color 0.5s ease;
        }

        .layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        #grid-layer {
            background-image:
                linear-gradient(rgba(30, 30, 30, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(30, 30, 30, 0.3) 1px, transparent 1px);
            background-size: clamp(20px, 4vw, 40px) clamp(20px, 4vw, 40px);
            opacity: 0.2;
            z-index: 0;
        }

        #particle-canvas {
            z-index: 1;
        }

        #light-mask {
            background: radial-gradient(circle 600px at var(--x) var(--y),
                    transparent 0%,
                    rgba(2, 2, 2, 0.85) 50%,
                    rgba(2, 2, 2, 1) 100%);
            z-index: 2;
        }

        #ui-layer {
            z-index: 10;
            pointer-events: auto;
            position: relative;
            width: 100%;
            height: 100%;
            zoom: 0.9;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: clamp(10px, 2vw, 20px);
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: 100%;
            gap: 15px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }

        .widget {
            background: var(--c-glass);
            border: 1px solid var(--c-border);
            backdrop-filter: blur(12px);
            padding: 15px;
            border-radius: 4px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
            transition: all 0.5s ease;
        }

        .widget:hover {
            border-color: rgba(var(--c-accent-rgb), 0.3);
            box-shadow: 0 0 15px rgba(var(--c-accent-rgb), 0.1);
        }

        .w-header {
            font-family: var(--font-disp);
            font-weight: 700;
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .id-card {
            width: 300px;
            border-left: 2px solid var(--c-accent);
            flex-shrink: 0;
        }

        .id-main {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .id-avatar {
            width: 40px;
            height: 40px;
            background: var(--c-accent-dim);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--c-accent);
            transition: all 0.5s ease;
        }

        .id-info h1 {
            font-family: var(--font-disp);
            font-size: 1.5rem;
            line-height: 1;
            color: #fff;
            font-weight: 700;
        }

        .id-info p {
            font-size: 0.75rem;
            color: var(--c-accent);
            transition: color 0.5s ease;
        }

        .sys-card {
            width: 250px;
            text-align: right;
            border-right: 2px solid #333;
            flex-shrink: 1;
        }

        .stat-row {
            font-size: 0.75rem;
            margin-bottom: 4px;
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .stat-label {
            color: #555;
        }

        .stat-val {
            color: #aaa;
        }

        #stage {
            flex-grow: 1;
            position: relative;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            min-height: 0;
        }

        .window {
            width: 90%;
            max-width: 1000px;
            height: 85%;
            max-height: 800px;
            background: rgba(5, 5, 5, 0.9);
            border: 1px solid var(--c-border);
            border-top: 2px solid var(--c-accent);
            display: none;
            flex-direction: column;
            pointer-events: auto;
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            transition: border-color 0.5s ease;
        }

        .window.active {
            display: flex;
        }

        .win-head {
            background: rgba(255, 255, 255, 0.03);
            padding: 10px 15px;
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--c-border);
            color: #888;
            flex-shrink: 0;
        }

        .res-nav {
            display: flex;
            background: #050505;
            border-bottom: 1px solid var(--c-border);
            overflow-x: auto;
            scrollbar-width: none;
            padding: 5px;
            gap: 5px;
            position: relative;
            z-index: 10;
            flex-shrink: 0;
        }

        .res-nav button {
            background: transparent;
            border: 1px solid transparent;
            color: #555;
            padding: 8px 16px;
            font-family: var(--font-disp);
            font-weight: 700;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-radius: 4px;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .res-nav button:hover {
            color: #ccc;
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .res-nav button.active {
            color: #000;
            background: var(--c-accent);
            border-color: var(--c-accent);
            box-shadow: 0 0 15px var(--c-accent-dim);
        }

        #btn-admin {
            color: #800000;
            display: none;
        }

        #btn-admin:hover {
            color: #ff3333;
        }

        #btn-admin.active {
            background: #ff3333;
            color: #000;
            border-color: #ff3333;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
        }

        .win-body {
            flex-grow: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 0;
            position: relative;
            scrollbar-width: thin;
            scrollbar-color: #333 transparent;
            -webkit-overflow-scrolling: touch;
        }

        .res-section-header {
            padding: 20px 25px 5px 25px;
            font-family: var(--font-disp);
            color: #888;
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .res-section-header::after {
            content: '';
            flex-grow: 1;
            height: 1px;
            background: linear-gradient(90deg, var(--c-border), transparent);
        }

        .res-section-header span {
            color: var(--c-accent);
            margin-right: 5px;
        }

        .res-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            padding: 15px 25px 35px 25px;
        }

        .res-card {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.03) 0%, rgba(0, 0, 0, 0.4) 100%);
            border: 1px solid var(--c-border);
            border-left: 3px solid #333;
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
            height: 100%;
        }

        .res-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 30px 30px 0;
            border-color: transparent rgba(255, 255, 255, 0.05) transparent transparent;
            transition: border-color 0.3s;
        }

        .res-card:hover {
            transform: translateY(-5px);
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.06) 0%, rgba(0, 0, 0, 0.6) 100%);
            border-color: rgba(255, 255, 255, 0.2);
            border-left-color: var(--c-accent);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
        }

        .res-card:hover::before {
            border-color: transparent var(--c-accent) transparent transparent;
        }

        .res-card h4 {
            color: #fff;
            font-family: var(--font-disp);
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        .res-card p {
            color: #888;
            font-size: 0.8rem;
            line-height: 1.4;
            flex-grow: 1;
        }

        .tag {
            align-self: flex-start;
            font-size: 0.6rem;
            font-weight: 800;
            letter-spacing: 1px;
            color: var(--c-accent);
            border: 1px solid var(--c-accent-dim);
            padding: 3px 8px;
            border-radius: 2px;
            background: rgba(0, 0, 0, 0.3);
            margin-bottom: 12px;
            text-transform: uppercase;
        }

        #cat-admin .res-card {
            border-left-color: #ff3333;
            background: linear-gradient(145deg, rgba(50, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.8) 100%);
        }

        #cat-admin .res-card:hover {
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.2);
            border-color: #ff3333;
        }

        #cat-admin .tag {
            color: #ff3333;
            border-color: rgba(255, 0, 0, 0.3);
        }

        .win-body::-webkit-scrollbar {
            width: 6px;
        }

        .win-body::-webkit-scrollbar-track {
            background: transparent;
        }

        .win-body::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 3px;
        }

        .win-body::-webkit-scrollbar-thumb:hover {
            background: var(--c-accent);
        }

        .dock-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            padding-bottom: 0;
            pointer-events: auto;
            width: 100%;
            z-index: 20;
            flex-shrink: 0;
        }

        .dock {
            display: flex;
            gap: 10px;
            background: rgba(20, 20, 20, 0.85);
            border: 1px solid var(--c-border);
            padding: 10px;
            border-radius: 12px;
            backdrop-filter: blur(15px);
            max-width: 100%;
            overflow-x: auto;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }

        .dock::-webkit-scrollbar {
            display: none;
        }

        .dock-btn {
            background: transparent;
            border: 1px solid transparent;
            color: #888;
            padding: 10px 20px;
            font-family: var(--font-disp);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
            position: relative;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .dock-btn:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
        }

        .dock-btn.active {
            color: var(--c-accent);
            background: var(--c-accent-dim);
            border-color: rgba(255, 157, 0, 0.3);
            box-shadow: 0 0 15px rgba(255, 157, 0, 0.1);
        }

        .dock-btn.active::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: var(--c-accent);
            border-radius: 50%;
        }

        #term-output {
            padding: 20px;
            font-size: clamp(0.8rem, 2vw, 1rem);
            color: #ccc;
            height: 100%;
            overflow-y: auto;
        }

        .ln {
            margin-bottom: 4px;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .pr {
            color: var(--c-accent);
            margin-right: 8px;
            display: inline-block;
        }

        .inp {
            background: transparent;
            border: none;
            color: #fff;
            width: 80%;
            outline: none;
            font-family: inherit;
            font-size: inherit;
        }

        #nano-container {
            display: none;
            flex-direction: column;
            height: 100%;
            background: #000;
            color: #fff;
            font-family: var(--font-mono);
        }

        #nano-header,
        #nano-footer {
            background: #222;
            padding: 5px 10px;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
        }

        #nano-body {
            flex-grow: 1;
            padding: 10px;
            overflow: auto;
        }

        #nano-textarea {
            width: 100%;
            height: 100%;
            background: transparent;
            border: none;
            color: #ddd;
            font-family: inherit;
            font-size: 1rem;
            resize: none;
            outline: none;
        }

        .id-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100%;
            text-align: center;
            padding: 40px 20px;
        }

        .id-content-wrap {
            margin: auto 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .social-link {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--c-border);
            padding: 12px 15px;
            color: #ccc;
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            width: 100%;
            border-radius: 4px;
        }

        .social-link:hover {
            background: var(--c-accent-dim);
            border-color: var(--c-accent);
            transform: translateX(2px);
            cursor: pointer;
        }

        .res-section {
            display: none;
        }

        .res-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        #local-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 20px;
        }

        .data-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px;
        }

        .data-val {
            font-size: 1rem;
            color: #fff;
            word-break: break-all;
        }

        #notification-area {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            max-width: 400px;
            align-items: center;
        }

        .sys-msg {
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid var(--c-accent);
            color: var(--c-accent);
            padding: 10px 20px;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            border-radius: 4px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            animation: slideUpFade 0.3s ease-out forwards;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #map-container {
            width: 100%;
            height: 100%;
            background: transparent;
        }

        .jvm-tooltip {
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid var(--c-accent);
            font-family: var(--font-mono);
            color: #fff;
            padding: 5px 10px;
            border-radius: 4px;
            z-index: 1000;
        }

        path[data-code="XJ"] {
            stroke: #fff !important;
            stroke-width: 1.5px !important;
        }

        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 1024px) {
            .window {
                width: 95%;
                height: 85%;
            }

            .id-card {
                width: auto;
                flex-grow: 1;
            }
        }

        @media (max-width: 768px) {

            body,
            html {
                overflow-y: auto !important;
                height: auto !important;
                -webkit-overflow-scrolling: touch;
            }

            #ui-layer {
                display: block;
                width: 100%;
                height: auto !important;
                zoom: 1;
                min-height: 100vh;
                padding-bottom: 90px;
            }

            .top-bar {
                margin-bottom: 20px;
            }

            .sys-card {
                display: none;
            }

            .id-card {
                width: 100%;
                border-left: none;
                border-bottom: 1px solid var(--c-accent);
                background: rgba(10, 10, 10, 0.9);
            }

            #stage {
                display: block;
                height: auto !important;
                margin: 0;
            }

            .window {
                width: 100%;
                height: auto !important;
                min-height: 400px;
                border: none;
                border-top: 1px solid var(--c-accent);
                background: rgba(5, 5, 5, 0.95);
                margin-bottom: 20px;
                display: none;
            }

            .window.active {
                display: flex;
            }

            .win-body {
                overflow: visible !important;
                height: auto !important;
                flex-grow: 0;
            }

            .dock-container {
                position: fixed;
                bottom: 0;
                left: 0;
                background: linear-gradient(to top, #020202 85%, transparent);
                padding: 15px 10px 20px 10px;
                z-index: 999;
            }

            .dock {
                width: 100%;
                border-radius: 0;
                border: none;
                background: rgba(20, 20, 20, 0.95);
                justify-content: flex-start;
                padding: 10px;
                box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.5);
            }

            .dock-btn {
                padding: 8px 16px;
                font-size: 0.9rem;
            }

            .res-grid {
                grid-template-columns: 1fr;
                gap: 10px;
                padding: 15px 25px 35px 25px;
            }

            .res-card {
                min-height: 80px;
                border-left: 2px solid #333;
            }

            .map-intel-card {
                left: 10px;
                right: 10px;
                width: auto;
                bottom: 10px;
            }
        }

        @media (max-width: 400px) {
            .id-info h1 {
                font-size: 1.2rem;
            }

            .dock-btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes torch-flicker {
            0% {
                opacity: 0.8;
                transform: translateY(0);
            }

            100% {
                opacity: 1;
                transform: translateY(-1px);
            }
        }

        .torch-anim {
            animation: torch-flicker 0.1s infinite alternate;
        }
    </style>
</head>

<body>

    <div id="grid-layer" class="layer"></div>
    <canvas id="particle-canvas" class="layer"></canvas>
    <div id="light-mask" class="layer" style="--x: 50%; --y: 50%;"></div>

    <div id="notification-area"></div>

    <div id="ui-layer">

        <div class="top-bar">
            <div class="widget id-card">
                <div class="w-header">
                    <span>ACTIVE_SESSION</span>
                    <span id="status-dot"
                        style="width:8px; height:8px; background:#0f0; border-radius:50%; box-shadow:0 0 5px #0f0;"></span>
                </div>
                <div class="id-main">
                    <div class="id-avatar">
                        <svg width="24" height="24" viewBox="0 0 10 20"
                            style="filter: drop-shadow(0 0 5px var(--c-accent));">
                            <rect x="4" y="9" width="2" height="10" fill="#5d4037" />
                            <rect x="3" y="6" width="4" height="3" fill="#3e2723" />
                            <rect x="4" y="4" width="2" height="2" fill="#ff5722" />
                            <rect x="4" y="2" width="2" height="2" fill="#ffeb3b" class="torch-anim" />
                        </svg>
                    </div>
                    <div class="id-info">
                        <h1>TORCH</h1>
                        <p id="user-role">JORDANSEC // WEB_OPS</p>
                    </div>
                </div>
            </div>

            <div class="widget sys-card">
                <div class="w-header">LOCAL_ENV</div>
                <div id="sys-data"></div>
            </div>
        </div>

        <div id="stage">

            <div id="win-terminal" class="window active">
                <div class="win-head">
                    <span>TERMINAL</span>
                    <span>bash --login</span>
                </div>
                <div class="win-body" style="display:flex; flex-direction:column;">
                    <div id="term-output">
                        <div class="ln">TorchOS kernel loaded...</div>
                        <div class="ln">Welcome back. System integrity verified.</div>
                        <div class="ln">Type <span style="color:var(--c-accent)">help</span> for a list of commands.
                        </div>
                        <div class="ln"><br></div>
                    </div>
                    <div id="nano-container">
                        <div id="nano-header">
                            <span style="font-weight:bold;">GNU nano 5.4</span>
                            <span id="nano-filename">New Buffer</span>
                            <span>Modified</span>
                        </div>
                        <div id="nano-body">
                            <textarea id="nano-textarea" spellcheck="false"></textarea>
                        </div>
                        <div id="nano-footer">
                            <span id="nano-footer-left"><span style="background:#fff; color:#000;">^S</span> Save</span>
                            <span id="nano-footer-right"><span style="background:#fff; color:#000;">^X</span>
                                Exit</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="win-map" class="window">
                <div class="win-head">
                    <span>GLOBAL INTEL</span>
                    <span>/var/opt/map_data</span>
                </div>
                <div class="win-body" style="background: rgba(10,15,20,0.6);">
                    <div id="map-container"></div>
                </div>
            </div>

            <div id="win-resources" class="window">
                <div class="win-head">
                    <span>DATABASE</span>
                    <span>/usr/share/resources</span>
                </div>
                <div class="res-nav">
                    <button class="active" onclick="filterRes('all')">ALL</button>
                    <button onclick="filterRes('web')">WEB</button>
                    <button onclick="filterRes('ctf')">CTF</button>
                    <button onclick="filterRes('red')">RED</button>
                    <button onclick="filterRes('blue')">BLUE</button>
                    <button onclick="filterRes('int')">INTEL</button>
                    <button onclick="filterRes('tools')">TOOLS</button>
                    <button id="btn-admin" onclick="filterRes('admin')">ADMIN</button>
                </div>
                <div class="win-body">
                    <div id="cat-web" class="res-section active">
                        <div class="res-section-header"><span>//</span> WEB_EXPLOITATION</div>
                        <div class="res-grid">
                            <a href="https://portswigger.net/web-security" target="_blank" class="res-card"><span
                                    class="tag">ACADEMY</span>
                                <h4>PortSwigger</h4>
                                <p>The gold standard for web sec.</p>
                            </a>
                            <a href="https://owasp.org/www-project-top-ten/" target="_blank" class="res-card"><span
                                    class="tag">REF</span>
                                <h4>OWASP Top 10</h4>
                                <p>Critical web risks.</p>
                            </a>
                            <a href="https://pentesterlab.com/" target="_blank" class="res-card"><span
                                    class="tag">LEARN</span>
                                <h4>PentesterLab</h4>
                                <p>Web Pentest Bootcamps.</p>
                            </a>
                            <a href="https://www.hacksplaining.com/" target="_blank" class="res-card"><span
                                    class="tag">LEARN</span>
                                <h4>Hacksplaining</h4>
                                <p>Vulns explained simply.</p>
                            </a>
                            <a href="https://owasp.org/www-project-juice-shop/" target="_blank" class="res-card"><span
                                    class="tag">LAB</span>
                                <h4>OWASP Juice Shop</h4>
                                <p>Modern broken web app.</p>
                            </a>
                            <a href="https://github.com/digininja/DVWA" target="_blank" class="res-card"><span
                                    class="tag">LAB</span>
                                <h4>DVWA</h4>
                                <p>Damn Vulnerable Web App.</p>
                            </a>
                            <a href="https://google-gruyere.appspot.com/" target="_blank" class="res-card"><span
                                    class="tag">LAB</span>
                                <h4>Gruyere</h4>
                                <p>Cheesy web app exploit.</p>
                            </a>
                            <a href="https://xss-game.appspot.com/" target="_blank" class="res-card"><span
                                    class="tag">GAME</span>
                                <h4>XSS Game</h4>
                                <p>Google's XSS practice.</p>
                            </a>
                        </div>
                    </div>
                    <div id="cat-ctf" class="res-section active">
                        <div class="res-section-header"><span>//</span> CTF_PLATFORMS</div>
                        <div class="res-grid">
                            <a href="https://www.hackthebox.com/" target="_blank" class="res-card"><span
                                    class="tag">CTF</span>
                                <h4>Hack The Box</h4>
                                <p>Pentesting labs.</p>
                            </a>
                            <a href="https://tryhackme.com" target="_blank" class="res-card"><span
                                    class="tag">LEARN</span>
                                <h4>TryHackMe</h4>
                                <p>Guided cyber training.</p>
                            </a>
                            <a href="https://ctftime.org/" target="_blank" class="res-card"><span
                                    class="tag">RANK</span>
                                <h4>CTFtime</h4>
                                <p>Global CTF Tracker.</p>
                            </a>
                            <a href="https://picoctf.org/" target="_blank" class="res-card"><span
                                    class="tag">BEGINNER</span>
                                <h4>PicoCTF</h4>
                                <p>Best starting point.</p>
                            </a>
                            <a href="https://overthewire.org/wargames/" target="_blank" class="res-card"><span
                                    class="tag">SSH</span>
                                <h4>OverTheWire</h4>
                                <p>Bandit & Wargames.</p>
                            </a>
                            <a href="https://cryptohack.org/" target="_blank" class="res-card"><span
                                    class="tag">CRYPTO</span>
                                <h4>CryptoHack</h4>
                                <p>Learn cryptography.</p>
                            </a>
                        </div>
                    </div>
                    <div id="cat-red" class="res-section active">
                        <div class="res-section-header"><span>//</span> RED_TEAM_OPS</div>
                        <div class="res-grid">
                            <a href="https://www.revshells.com/" target="_blank" class="res-card"><span
                                    class="tag">SHELL</span>
                                <h4>RevShells</h4>
                                <p>Reverse shell generator.</p>
                            </a>
                            <a href="https://gchq.github.io/CyberChef/" target="_blank" class="res-card"><span
                                    class="tag">DATA</span>
                                <h4>CyberChef</h4>
                                <p>The Cyber Swiss Knife.</p>
                            </a>
                            <a href="https://gtfobins.github.io/" target="_blank" class="res-card"><span
                                    class="tag">UNIX</span>
                                <h4>GTFOBins</h4>
                                <p>Unix binary bypass.</p>
                            </a>
                            <a href="https://lolbas-project.github.io/" target="_blank" class="res-card"><span
                                    class="tag">WIN</span>
                                <h4>LOLBAS</h4>
                                <p>Windows binary bypass.</p>
                            </a>
                            <a href="https://crackstation.net/" target="_blank" class="res-card"><span
                                    class="tag">HASH</span>
                                <h4>CrackStation</h4>
                                <p>Hash cracker.</p>
                            </a>
                            <a href="https://github.com/danielmiessler/SecLists" target="_blank" class="res-card"><span
                                    class="tag">WORDLIST</span>
                                <h4>SecLists</h4>
                                <p>Wordlists repository.</p>
                            </a>
                            <a href="https://github.com/swisskyrepo/PayloadsAllTheThings" target="_blank"
                                class="res-card"><span class="tag">CHEATS</span>
                                <h4>PayloadsAllTheThings</h4>
                                <p>Attack cheat sheets.</p>
                            </a>
                        </div>
                    </div>
                    <div id="cat-blue" class="res-section active">
                        <div class="res-section-header"><span>//</span> DEFENSIVE_OPS</div>
                        <div class="res-grid">
                            <a href="https://blueteamlabs.online/" target="_blank" class="res-card"><span
                                    class="tag">PRACTICE</span>
                                <h4>Blue Team Labs</h4>
                                <p>Defensive security labs.</p>
                            </a>
                            <a href="https://www.virustotal.com/" target="_blank" class="res-card"><span
                                    class="tag">SCAN</span>
                                <h4>VirusTotal</h4>
                                <p>Analyze files & URLs.</p>
                            </a>
                            <a href="https://www.splunk.com/" target="_blank" class="res-card"><span
                                    class="tag">SIEM</span>
                                <h4>Splunk</h4>
                                <p>Data-to-Everything.</p>
                            </a>
                            <a href="https://wazuh.com/" target="_blank" class="res-card"><span class="tag">EDR</span>
                                <h4>Wazuh</h4>
                                <p>Open source XDR.</p>
                            </a>
                            <a href="https://docs.velociraptor.app/" target="_blank" class="res-card"><span
                                    class="tag">DFIR</span>
                                <h4>Velociraptor</h4>
                                <p>Digital forensics tool.</p>
                            </a>
                        </div>
                    </div>
                    <div id="cat-int" class="res-section active">
                        <div class="res-section-header"><span>//</span> OSINT_&_RECON</div>
                        <div class="res-grid">
                            <a href="https://www.shodan.io/" target="_blank" class="res-card"><span
                                    class="tag">IOT</span>
                                <h4>Shodan</h4>
                                <p>IoT Search Engine.</p>
                            </a>
                            <a href="https://osintframework.com/" target="_blank" class="res-card"><span
                                    class="tag">MAP</span>
                                <h4>OSINT Framework</h4>
                                <p>Reconnaissance map.</p>
                            </a>
                            <a href="https://www.exploit-db.com/" target="_blank" class="res-card"><span
                                    class="tag">DB</span>
                                <h4>Exploit-DB</h4>
                                <p>CVE Archive.</p>
                            </a>
                            <a href="https://search.censys.io/" target="_blank" class="res-card"><span
                                    class="tag">SCAN</span>
                                <h4>Censys</h4>
                                <p>Internet asset search.</p>
                            </a>
                            <a href="https://dnsdumpster.com/" target="_blank" class="res-card"><span
                                    class="tag">DNS</span>
                                <h4>DNSDumpster</h4>
                                <p>DNS recon tool.</p>
                            </a>
                            <a href="https://web.archive.org/" target="_blank" class="res-card"><span
                                    class="tag">HIST</span>
                                <h4>Wayback Machine</h4>
                                <p>Internet history.</p>
                            </a>
                        </div>
                    </div>
                    <div id="cat-tools" class="res-section active">
                        <div class="res-section-header"><span>//</span> ARSENAL</div>
                        <div class="res-grid">
                            <a href="https://portswigger.net/burp" target="_blank" class="res-card"><span
                                    class="tag">PROXY</span>
                                <h4>Burp Suite</h4>
                                <p>Web vulnerability scanner.</p>
                            </a>
                            <a href="https://nmap.org/" target="_blank" class="res-card"><span
                                    class="tag">NETWORK</span>
                                <h4>Nmap</h4>
                                <p>Network mapper.</p>
                            </a>
                            <a href="https://www.wireshark.org/" target="_blank" class="res-card"><span
                                    class="tag">PCAP</span>
                                <h4>Wireshark</h4>
                                <p>Packet analyzer.</p>
                            </a>
                            <a href="https://www.metasploit.com/" target="_blank" class="res-card"><span
                                    class="tag">EXPLOIT</span>
                                <h4>Metasploit</h4>
                                <p>Penetration framework.</p>
                            </a>
                            <a href="https://github.com/sqlmapproject/sqlmap" target="_blank" class="res-card"><span
                                    class="tag">SQLI</span>
                                <h4>SQLMap</h4>
                                <p>Auto SQL injection.</p>
                            </a>
                        </div>
                    </div>
                    <div id="cat-admin" class="res-section">
                        <div class="res-section-header" style="color:#ff3333"><span>//</span> RESTRICTED_AREA</div>
                        <div class="res-grid">
                            <div class="res-card" style="border-color:#ff3333; cursor:default;">
                                <span class="tag" style="color:#ff3333">STATUS</span>
                                <h4>ROOT ACCESS</h4>
                                <p>Welcome, Administrator.</p>
                            </div>
                            <a href="#" onclick="sysNotify('Searching internal database... (Simulated)')"
                                class="res-card">
                                <span class="tag">PRIVATE</span>
                                <h4>Zero-Days</h4>
                                <p>Internal vulnerability db.</p>
                            </a>
                            <a href="#" onclick="sysNotify('Establishing secure tunnel... (Simulated)')"
                                class="res-card">
                                <span class="tag">C2</span>
                                <h4>C2 Server</h4>
                                <p>Command & Control panel.</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="win-identity" class="window">
                <div class="win-head">
                    <span>PROFILE</span>
                    <span>user_info</span>
                </div>
                <div class="win-body">
                    <div id="id-locked-view"
                        style="display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100%; text-align:center; padding: 20px;">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#ff3333" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round"
                            style="margin-bottom:20px; filter:drop-shadow(0 0 10px #ff0000);">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        <h2
                            style="color:#ff3333; font-family:var(--font-disp); letter-spacing:2px; margin-bottom:10px;">
                            ENCRYPTED PROFILE</h2>
                        <p style="color:#888; font-size:0.8rem;">Decryption key required.</p>
                        <p style="color:#555; font-size:0.7rem; margin-top:5px;">Hint: Check hidden files in home dir.
                        </p>

                        <div
                            style="margin-top:20px; margin-bottom:10px; display:flex; flex-direction:column; gap:10px; align-items:center;">
                            <div style="display:flex; gap:5px;">
                                <input type="password" id="gui-pin" placeholder="ENTER PIN"
                                    style="background: rgba(255,255,255,0.1); border: 1px solid var(--c-border); color: white; padding: 5px 10px; font-family: var(--font-mono); width: 120px; text-align: center; outline: none;">
                                <button onclick="checkGuiPin()"
                                    style="background: var(--c-accent); color: black; border: none; padding: 5px 10px; font-family: var(--font-disp); font-weight: bold; cursor: pointer;">></button>
                            </div>
                        </div>

                        <button onclick="unlockIdentity()"
                            style="background:transparent; border:1px solid #444; padding:5px 10px; color:#666; font-size:0.7rem; cursor:pointer; margin-top:20px; font-family:var(--font-mono);">SKIP
                            CHALLENGE</button>
                    </div>

                    <div id="id-unlocked-view" class="id-content" style="display:none;">
                        <div class="id-content-wrap">
                            <div
                                style="letter-spacing: 4px; color:#888; border-top:1px solid #333; border-bottom:1px solid #333; padding:10px 0; margin-bottom: 30px; width: 100%; max-width: 300px;">
                                WEB EXPLOITATION</div>

                            <div style="display:flex; flex-direction:column; gap:10px; width: 100%; max-width: 300px;">
                                <a href="https://github.com/Torch4084" target="_blank" class="social-link">
                                    <span style="font-weight:bold;">GITHUB</span>
                                    <span style="color:var(--c-accent); font-family:var(--font-mono);">@Torch4084</span>
                                </a>
                                <a href="https://discord.com/users/1177684089139114048" target="_blank"
                                    class="social-link">
                                    <span style="font-weight:bold;">DISCORD</span>
                                    <span style="color:var(--c-accent); font-family:var(--font-mono);">Torch4084</span>
                                </a>
                                <a href="https://t.me/torch4084" target="_blank" class="social-link">
                                    <span style="font-weight:bold;">TELEGRAM</span>
                                    <span style="color:var(--c-accent); font-family:var(--font-mono);">@Torch4084</span>
                                </a>
                                <div onclick="copyEmail('torch@t0rch.xyz')" class="social-link" style="cursor:pointer;">
                                    <span style="font-weight:bold;">EMAIL</span>
                                    <span
                                        style="color:var(--c-accent); font-family:var(--font-mono);">torch@t0rch.xyz</span>
                                </div>
                            </div>

                            <div style="display:flex; gap:30px; margin-top:30px;">
                                <div>
                                    <div style="font-size:0.7rem; color:#666">ID</div>
                                    <div style="color:var(--c-accent)" id="id-disp-id">0x312</div>
                                </div>
                                <div>
                                    <div style="font-size:0.7rem; color:#666">TEAM</div>
                                    <div style="color:var(--c-accent)" id="id-disp-team">JordanSec</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="win-local" class="window">
                <div class="win-head">
                    <span>RECONNAISSANCE</span>
                    <span>local_env</span>
                </div>
                <div class="win-body">
                    <div id="local-grid"></div>
                </div>
            </div>

        </div>

        <div class="dock-container">
            <div class="dock">
                <button class="dock-btn active" onclick="switchTab('terminal')">TERMINAL</button>
                <button class="dock-btn" onclick="switchTab('identity')">IDENTITY</button>
                <button class="dock-btn" onclick="switchTab('resources')">RESOURCES</button>
                <button class="dock-btn" onclick="switchTab('map')">MAP</button>
                <button class="dock-btn" onclick="switchTab('local')">HOST</button>
                <button class="dock-btn" onclick="toggleLight()">LIGHT</button>
            </div>
        </div>

    </div>

    <script>
        const fileSystem = {
            '/': ['bin', 'etc', 'home', 'usr', 'var', 'root'],
            '/home': ['torch'],
            '/home/torch': ['readme.txt', '.pin_code'],
            '/bin': ['bash', 'ls', 'cat', 'neofetch', 'ping', 'ip', 'ps', 'date', 'whoami', 'nano', 'scan', 'unlock'],
            '/etc': ['passwd', 'hostname', 'resolv.conf', 'os-release'],
            '/usr/share/resources': ['(use UI tab to view links)'],
            '/var': ['log'],
            '/var/log': ['sys_debug.log'],
            '/root': ['flag.txt']
        };

        const fileContents = {
            '/etc/passwd': 'root:x:0:0:root:/root:/bin/bash\ntorch:x:1000:1000:torch:/home/torch:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin',
            '/etc/hostname': 'torch-box',
            '/etc/resolv.conf': 'nameserver 1.1.1.1\nnameserver 8.8.8.8',
            '/etc/os-release': 'NAME="TorchOS"\nVERSION="Rolling"\nID=torch\nPRETTY_NAME="Torch OS"',
            '/var/log/sys_debug.log': 'ERROR [kernel]: User login failed.\nWARN [auth]: Root password hash mismatch.\nDEBUG [auth]: Expected hash for "torchos_admin_2025" but got null.',
            '/home/torch/readme.txt': 'Welcome to TorchOS\n\nThis is a portfolio system designed for penetration testing showcases.\nFeel free to explore the system. Some areas are restricted.\n\n- Torch',
            '/home/torch/.pin_code': 'PIN: 4084',
            '/root/flag.txt': 'JSEC{UNL0CK3D_THE_M4TR1X}'
        };

        let currentDir = '/home/torch';
        let commandHistory = [];
        let historyIndex = -1;
        let nanoMode = false;
        let nanoFile = "";
        let isRoot = false;
        let isIdentityUnlocked = false;
        let mapInitialized = false;

        function getBrowser() {
            const ua = navigator.userAgent;
            if (ua.indexOf("OPR") > -1 || ua.indexOf("Opera") > -1) return 'Opera';
            if (ua.indexOf("Edg") > -1) return 'Edge';
            if (ua.indexOf("Chrome") > -1) return 'Chrome';
            if (ua.indexOf("Safari") > -1) return 'Safari';
            if (ua.indexOf("Firefox") > -1) return 'Firefox';
            if (ua.indexOf("MSIE") > -1 || !!document.documentMode) return 'IE';
            return 'Unknown Browser';
        }

        function getOS() {
            const ua = navigator.userAgent;
            if (ua.indexOf("Win") != -1) return "Windows";
            if (ua.indexOf("Mac") != -1) return "MacOS";
            if (ua.indexOf("Linux") != -1) return "Linux";
            if (ua.indexOf("Android") != -1) return "Android";
            if (ua.indexOf("like Mac") != -1) return "iOS";
            return "Web Host";
        }

        function getMemory() {
            if (navigator.deviceMemory) {
                return navigator.deviceMemory >= 8 ? ">= 8GB" : `${navigator.deviceMemory}GB`;
            }
            const cores = navigator.hardwareConcurrency || 4;
            if (cores >= 16) return "32GB (Est)";
            if (cores >= 8) return "16GB (Est)";
            if (cores >= 4) return "8GB (Est)";
            return "4GB (Est)";
        }

        let mx = window.innerWidth / 2, my = window.innerHeight / 2;
        let lightOn = true;

        document.addEventListener('mousemove', e => {
            mx = e.clientX; my = e.clientY;
            updateLight();
        });

        document.addEventListener('touchmove', e => {
            if (e.touches.length > 0) {
                mx = e.touches[0].clientX;
                my = e.touches[0].clientY;
                updateLight();
            }
        }, { passive: true });

        function updateLight() {
            if (lightOn) {
                const color = 'rgba(2, 2, 2, 0.85)';
                const colorEnd = 'rgba(2, 2, 2, 1)';

                document.getElementById('light-mask').style.background =
                    `radial-gradient(circle 600px at ${mx}px ${my}px, transparent 0%, ${color} 50%,
                    ${colorEnd} 100%)`;
            }
        }

        function toggleLight() {
            lightOn = !lightOn;
            updateLight();
            if (!lightOn) document.getElementById('light-mask').style.background = 'rgba(0,0,0,0.3)';
        }

        function switchTab(id) {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('active'));
            document.getElementById(`win-${id}`).classList.add('active');

            document.querySelectorAll('.dock-btn').forEach(b => b.classList.remove('active'));
            const btn = Array.from(document.querySelectorAll('.dock-btn')).find(b => b.innerText.toLowerCase().includes(id));
            if (btn) btn.classList.add('active');

            if (id === 'terminal' && window.innerWidth > 768) {
                setTimeout(() => document.querySelector('.inp')?.focus(), 10);
            }
            if (id === 'local') runRecon();
            if (id === 'map' && !mapInitialized) initMap();
        }

        function initMap() {
            if (typeof jsVectorMap === 'undefined') {
                return;
            }

            const container = document.getElementById('map-container');
            if (!container) return;

            container.innerHTML = '';

            try {
                const mapInstance = new jsVectorMap({
                    selector: '#map-container',
                    map: 'world',
                    backgroundColor: 'transparent',
                    zoomButtons: true,
                    zoomOnScroll: true,
                    zoomMax: 100,
                    zoomStep: 1.5,
                    bindTouchEvents: true,
                    regionsSelectableOne: false,
                    selectedRegions: ['JO'],
                    regionStyle: {
                        initial: { fill: '#333', stroke: '#111', strokeWidth: 0.5, fillOpacity: 0.8 },
                        hover: { fill: '#ff9d00', fillOpacity: 1, cursor: 'pointer' },
                        selected: { fill: '#4ade80' }
                    },
                    onRegionTooltipShow(event, tooltip, code) {
                        if (code === 'IL') {
                            tooltip.text('The Zionist Occupaion');
                        }
                        if (code === 'CN') {
                            tooltip.text('Oppressive Communists');
                        }
                    },
                    onLoaded(map) {
                        const svg = container.querySelector('svg');
                        const regionsGroup = svg ? svg.querySelector('#jvm-regions-group') : null;
                        if (regionsGroup) {
                            const etPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                            etPath.setAttribute('d', 'M605.8,180.7L606.27,180.62L606.38,180.39L606.51,180.28L606.45,179.86L606.26,179.65L606.41,179.44L606.63,178.94L607.08,178.77L607.51,178.8L608.45,178.1L608.82,178.12L608.87,178.04L608.85,177.94L608.69,177.77L608.78,177.57L609.14,177.76L609.32,177.77L609.49,177.71L609.65,177.78L610.53,177.21L610.63,177.57L610.76,177.71L610.69,177.93L610.81,178.2L611.42,178.2L611.6,178.01L611.84,177.92L612.07,177.98L612.29,177.79L612.36,178.01L612.46,178.06L612.89,177.78L613.1,177.39L613.24,177.29L613.34,176.78L613.61,176.55L613.63,176.25L613.85,176.07L614.18,175.99L614.45,176.08L614.99,176.06L615.42,176.17L615.81,176.12L616.25,175.93L616.87,176.0L617.15,175.78L617.4,175.41L617.6,175.27L617.61,174.98L617.97,174.76L618.24,174.69L618.35,174.52L619.68,173.93L619.9,173.77L620.17,173.8L620.72,173.52L621.08,173.47L621.19,173.37L621.31,173.11L621.5,173.06L622.12,173.06L622.3,173.0L622.38,172.8L622.28,172.52L622.37,172.45L622.41,172.33L622.23,171.74L622.26,171.57L622.14,171.37L622.09,171.13L622.34,170.65L622.53,170.66L623.02,170.5L623.11,170.42L623.12,170.31L623.06,170.23L622.72,170.12L622.64,170.0L623.23,169.7L623.43,169.78L623.59,169.78L623.69,169.69L623.72,169.57L623.59,169.16L623.36,169.03L623.51,168.77L623.51,168.62L622.92,167.24L622.79,167.04L622.74,166.81L622.59,166.61L622.67,166.28L622.56,165.6L622.69,165.16L622.63,165.01L622.94,164.89L622.96,164.73L622.29,164.41L621.67,164.48L621.38,164.33L621.37,164.26L621.94,163.88L622.21,163.9L622.66,163.84L622.81,163.65L623.03,163.66L623.43,163.53L623.83,163.58L625.55,163.07L625.84,162.9L625.99,162.93L626.03,162.99L626.12,163.36L626.53,163.53L627.29,163.26L627.49,163.33L627.84,163.61L628.08,163.56L628.28,163.15L628.32,162.58L628.24,162.49L627.99,162.4L627.6,162.35L627.48,162.24L627.67,161.66L627.97,161.13L628.17,160.21L628.43,159.78L628.84,158.52L629.21,157.86L629.29,157.06L629.53,157.05L630.48,157.51L631.43,157.8L631.87,157.83L632.1,157.74L632.35,157.72L632.73,157.74L632.98,157.82L633.33,157.77L633.5,157.93L633.41,158.19L633.46,158.28L633.55,158.31L634.02,158.18L634.17,158.02L634.35,157.97L634.6,157.78L634.78,157.59L635.5,157.52L635.64,157.13L635.89,157.05L635.96,156.8L635.96,156.48L635.72,156.07L635.75,155.66L635.55,154.73L635.73,154.05L636.05,153.36L636.18,153.24L636.71,153.17L637.2,153.2L637.5,152.99L637.8,152.99L638.15,152.84L638.27,152.63L638.64,152.21L638.62,151.98L638.73,151.75L638.61,151.61L638.54,151.42L638.87,150.99L639.16,151.03L639.5,150.92L640.21,151.1L640.42,151.04L640.5,150.94L641.19,150.8L641.19,151.18L641.32,151.28L641.32,151.33L641.04,151.48L640.98,151.69L641.14,151.82L641.22,152.01L641.45,152.11L641.62,152.11L641.79,152.24L641.5,152.57L641.62,152.76L641.84,152.8L642.1,152.96L642.28,152.96L642.44,153.03L642.72,153.27L642.93,153.28L643.06,153.41L643.04,153.62L643.15,153.89L643.28,153.98L643.45,154.0L643.69,154.2L643.97,154.2L644.3,154.56L644.77,154.62L645.11,154.42L645.27,154.47L645.55,154.45L645.63,154.65L645.73,154.71L645.82,154.86L645.97,154.91L646.08,155.1L646.46,155.1L646.57,155.06L646.63,154.91L646.8,154.93L646.78,155.1L646.87,155.31L647.1,155.47L647.5,155.6L647.47,155.71L647.61,155.99L647.75,156.12L647.77,156.39L647.87,156.48L647.83,156.71L648.45,157.66L648.87,157.86L648.99,158.08L648.96,158.26L649.17,158.5L649.14,158.93L649.26,159.04L648.89,159.86L649.02,160.29L649.14,160.47L649.15,160.72L648.43,161.54L648.27,162.37L648.53,162.63L648.64,163.03L648.81,163.14L648.84,163.36L648.98,163.4L649.17,163.31L649.45,163.32L649.83,163.57L650.14,163.62L650.3,163.52L650.56,163.75L650.88,163.79L651.82,163.74L652.19,163.93L652.91,163.98L653.85,163.86L654.08,163.96L654.62,163.95L654.83,164.03L655.06,164.02L655.26,164.11L655.52,164.13L655.96,164.35L656.5,164.97L656.87,165.05L657.16,165.02L657.38,165.22L657.53,165.46L657.79,165.51L658.17,165.71L658.45,166.0L659.32,166.27L660.13,166.18L659.98,166.5L659.98,166.97L660.04,167.03L660.52,167.16L660.91,168.15L661.26,168.82L661.37,169.31L662.43,170.29L662.52,170.45L662.56,170.86L661.94,171.23L661.81,171.4L661.72,172.64L661.79,173.01L661.36,173.44L661.17,173.5L660.46,173.42L659.37,173.63L658.16,174.24L656.71,175.7L655.63,177.23L654.94,177.56L654.32,177.5L654.18,177.51L654.02,177.6L653.95,178.72L653.61,179.26L653.57,179.42L653.6,179.6L654.04,180.67L654.0,181.44L652.62,181.71L652.31,181.93L652.01,182.06L650.79,182.4L650.37,182.44L649.95,182.63L649.25,182.77L648.36,182.83L648.29,182.88L648.26,183.01L647.64,183.4L647.5,183.45L647.22,183.44L647.06,183.54L647.03,183.69L647.14,183.95L647.76,184.91L647.78,185.1L647.67,185.37L647.72,185.52L648.77,186.07L649.04,186.3L649.39,186.42L649.57,186.93L649.96,187.47L649.97,187.6L649.92,187.65L649.68,187.69L649.21,187.89L648.95,187.87L648.76,187.92L648.4,188.33L648.37,188.63L648.45,188.85L648.71,189.09L649.18,189.22L649.5,190.24L649.47,190.35L648.94,190.54L648.82,190.53L648.3,190.24L647.14,190.19L646.98,189.95L646.79,189.82L646.69,189.89L646.55,190.34L646.39,190.37L645.93,190.33L644.81,189.81L644.19,189.77L643.84,189.5L643.5,189.5L643.05,189.37L642.92,189.28L642.71,189.25L641.7,189.33L641.41,189.5L640.64,189.6L640.07,189.48L639.65,189.69L638.66,189.81L638.35,189.93L637.87,189.92L637.7,190.06L637.36,190.14L637.19,190.24L637.11,190.5L636.97,190.65L636.87,190.94L636.57,191.23L636.01,191.22L635.64,191.53L635.56,191.38L635.32,191.26L635.12,191.25L634.88,191.32L634.56,191.27L633.99,191.44L633.62,191.7L633.08,191.81L632.12,192.33L631.72,192.21L631.36,192.34L630.73,192.38L629.77,192.2L629.51,192.25L629.18,192.03L629.2,191.7L629.13,191.55L628.99,191.46L628.76,191.43L628.46,191.55L627.7,191.45L627.46,191.59L627.37,191.87L626.83,192.16L626.66,192.5L625.96,192.7L625.7,192.72L625.25,192.47L624.73,192.5L624.36,192.29L624.24,192.36L624.21,192.56L624.15,192.57L623.89,192.42L623.59,192.42L623.38,192.31L622.93,192.26L622.4,191.9L622.26,192.0L622.26,192.26L622.04,192.76L621.67,193.16L621.65,193.26L621.72,193.46L621.46,193.54L621.32,193.68L621.32,193.8L621.4,194.04L621.51,194.2L621.51,194.31L621.11,195.03L620.99,195.06L620.71,194.94L620.37,194.9L620.02,195.01L619.67,194.99L619.09,195.25L618.73,195.07L618.36,194.75L617.64,194.6L617.47,194.49L617.27,193.87L617.11,193.61L617.06,193.27L616.75,192.69L616.88,192.2L616.85,192.05L616.79,192.0L616.61,192.0L616.38,192.17L616.12,191.98L615.82,192.1L615.45,192.04L615.2,192.07L614.88,191.9L614.54,191.91L614.29,191.74L613.98,191.74L613.8,191.58L613.6,191.56L613.4,191.38L613.15,191.28L613.15,190.99L613.12,190.9L613.03,190.84L612.71,190.97L612.65,191.04L612.11,191.11L611.95,190.65L611.59,190.54L611.49,190.42L611.48,190.34L611.66,190.21L611.67,190.07L611.77,189.95L611.66,189.74L611.68,189.28L611.34,188.72L610.8,188.39L610.57,188.36L610.28,188.48L610.17,188.03L609.98,187.89L609.68,187.84L609.43,187.7L609.01,187.75L608.87,187.85L608.69,187.65L608.49,187.64L608.37,187.54L608.01,187.61L607.91,187.47L607.67,187.34L607.84,187.3L607.94,187.15L608.25,187.15L608.48,186.97L608.62,187.19L608.93,187.15L609.07,187.0L609.36,186.91L609.45,186.71L609.6,186.66L609.62,186.54L608.96,185.99L608.95,185.89L609.15,185.52L609.12,185.43L608.96,185.33L609.02,185.22L608.97,185.13L608.94,184.77L608.71,184.6L608.67,184.02L608.83,183.77L608.83,183.52L608.61,183.29L608.44,183.27L608.31,183.16L607.51,182.85L607.23,182.9L606.94,182.85L606.83,183.02L606.72,183.06L606.73,183.26L606.52,183.25L606.25,183.1L606.07,182.73L606.06,182.49L605.94,182.32L606.0,182.24L606.24,182.19L606.3,182.0L605.99,181.7L605.91,181.49L605.75,181.31L605.84,180.92L605.81,180.69Z');
                            etPath.setAttribute('data-code', 'XJ');
                            etPath.style.setProperty('stroke', '#101316', 'important');
                            etPath.style.setProperty('stroke-width', '0.6px', 'important');
                            etPath.style.setProperty('fill', 'rgb(44, 44, 45)', 'important');
                            etPath.style.setProperty('fill-opacity', '1', 'important');
                            etPath.style.cursor = 'pointer';
                            regionsGroup.appendChild(etPath);

                            etPath.addEventListener('mouseenter', function (e) {
                                this.style.setProperty('fill', '#ff9d00', 'important');
                                this.style.setProperty('fill-opacity', '1', 'important');
                                const tooltip = document.querySelector('.jvm-tooltip');
                                if (tooltip) {
                                    tooltip.textContent = 'East Turkestan';
                                    tooltip.style.display = 'block';
                                    tooltip.style.left = (e.pageX + 10) + 'px';
                                    tooltip.style.top = (e.pageY - 25) + 'px';
                                }
                            });

                            etPath.addEventListener('mousemove', function (e) {
                                const tooltip = document.querySelector('.jvm-tooltip');
                                if (tooltip) {
                                    tooltip.style.left = (e.pageX + 10) + 'px';
                                    tooltip.style.top = (e.pageY - 25) + 'px';
                                }
                            });

                            etPath.addEventListener('mouseleave', function () {
                                this.style.setProperty('fill', 'rgb(44, 44, 45)', 'important');
                                this.style.setProperty('fill-opacity', '1', 'important');
                                const tooltip = document.querySelector('.jvm-tooltip');
                                if (tooltip) {
                                    tooltip.style.display = '';
                                }
                            });
                        }
                    }
                });
                mapInitialized = true;

            } catch (e) {
                container.innerHTML = '<div style="color:red; text-align:center; padding-top:20px;">MAP ERROR: ' + e.message + '</div>';
            }
        }


        function filterRes(cat) {
            document.querySelectorAll('.res-nav button').forEach(b => b.classList.remove('active'));
            const btn = Array.from(document.querySelectorAll('.res-nav button')).find(b => b.innerText.toLowerCase().includes(cat));
            if (btn) btn.classList.add('active');

            document.querySelectorAll('.res-section').forEach(s => {
                if (cat === 'all') {
                    if (s.id === 'cat-admin' && !isRoot) {
                        s.classList.remove('active');
                    } else {
                        s.classList.add('active');
                    }
                }
                else {
                    if (s.id === `cat-${cat}`) s.classList.add('active');
                    else s.classList.remove('active');
                }
            });
        }

        function updateSys() {
            const el = document.getElementById('sys-data');
            if (!el) return;
            el.innerHTML = `
                <div class="stat-row"><span class="stat-label">OS</span><span class="stat-val">${getOS().toUpperCase()}</span></div>
                <div class="stat-row"><span class="stat-label">CORES</span><span class="stat-val">${navigator.hardwareConcurrency || 4}</span></div>
                <div class="stat-row"><span class="stat-label">RES</span><span class="stat-val">${window.screen.width}x${window.screen.height}</span></div>
                <div class="stat-row"><span class="stat-label">TIME</span><span class="stat-val" style="color:var(--c-accent)">${new Date().toLocaleTimeString()}</span></div>
            `;
        }
        setInterval(updateSys, 1000);
        updateSys();

        const term = document.getElementById('term-output');
        const nanoContainer = document.getElementById('nano-container');
        const nanoArea = document.getElementById('nano-textarea');
        const nanoName = document.getElementById('nano-filename');
        const nanoFooterLeft = document.getElementById('nano-footer-left');

        nanoArea.addEventListener('keydown', function (e) {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                const fullPath = resolvePath(nanoFile);
                fileContents[fullPath] = nanoArea.value;
                const dir = fullPath.substring(0, fullPath.lastIndexOf('/'));
                const file = fullPath.substring(fullPath.lastIndexOf('/') + 1);

                if (fileSystem[dir] && !fileSystem[dir].includes(file)) {
                    fileSystem[dir].push(file);
                } else if (!fileSystem[dir]) {
                    fileSystem[dir] = [file];
                }

                const originalText = nanoFooterLeft.innerHTML;
                const lineCount = nanoArea.value.split('\n').length;
                nanoFooterLeft.innerHTML = `<span style="background:#fff; color:#000;">[ Wrote ${lineCount} lines ]</span>`;
                setTimeout(() => {
                    nanoFooterLeft.innerHTML = originalText;
                }, 2000);
            }
            if (e.ctrlKey && e.key === 'x') {
                e.preventDefault();
                closeNano();
            }
        });

        function openNano(filename) {
            nanoMode = true;
            nanoFile = filename;
            term.style.display = 'none';
            nanoContainer.style.display = 'flex';
            nanoName.innerText = filename;

            const fullPath = resolvePath(filename);
            if (fileContents[fullPath]) {
                nanoArea.value = fileContents[fullPath];
            } else {
                nanoArea.value = '';
            }
            nanoArea.focus();
        }

        function closeNano() {
            nanoMode = false;
            nanoContainer.style.display = 'none';
            term.style.display = 'block';
            termInput();
        }

        function termInput() {
            if (nanoMode) return;
            const d = document.createElement('div');
            d.className = 'ln';
            const promptUser = isRoot ? 'root' : 'torch';
            const promptSymbol = isRoot ? '#' : '$';

            d.innerHTML = `<span class="pr">${promptUser}@sys:${currentDir === '/home/torch' ? '~' : currentDir} ${promptSymbol}</span><input class="inp" spellcheck="false" autofocus>`;
            term.appendChild(d);
            const i = d.querySelector('input');
            i.focus();

            i.onkeydown = e => {
                if (e.key === 'Enter') {
                    const v = i.value.trim();
                    if (v) {
                        commandHistory.push(v);
                        historyIndex = commandHistory.length;
                    }
                    i.disabled = true;
                    if (v) {
                        try {
                            runCmd(v);
                            termInput();
                        } catch (err) {
                            if (err.message === 'sudo_wait' || err.message === 'async_scan' || err.message === 'nano') {
                                return;
                            }
                            log('Error executing command: ' + err.message, '#f55');
                            termInput();
                        }
                    } else {
                        termInput();
                    }
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (historyIndex > 0) {
                        historyIndex--;
                        i.value = commandHistory[historyIndex];
                    }
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (historyIndex < commandHistory.length - 1) {
                        historyIndex++;
                        i.value = commandHistory[historyIndex];
                    } else {
                        historyIndex = commandHistory.length;
                        i.value = '';
                    }
                }
            };
            term.scrollTop = term.scrollHeight;
        }

        function resolvePath(path) {
            let start = (path.startsWith('/') ? '' : currentDir);

            if (path.startsWith('~')) {
                start = '/home/torch';
                path = path.substring(1);
            }

            const parts = (start + '/' + path).split('/');
            const stack = [];

            for (const part of parts) {
                if (part === '' || part === '.') continue;
                if (part === '..') {
                    if (stack.length > 0) stack.pop();
                } else {
                    stack.push(part);
                }
            }

            const resolved = '/' + stack.join('/');
            return resolved || '/';
        }

        function activateRootMode() {
            isRoot = true;
            document.documentElement.style.setProperty('--c-accent', '#ff3333');
            document.documentElement.style.setProperty('--c-accent-rgb', '255, 51, 51');
            document.documentElement.style.setProperty('--c-accent-dim', 'rgba(255, 0, 0, 0.1)');
            document.getElementById('user-role').innerText = "JORDANSEC // ROOT_ACCESS";
            document.getElementById('id-disp-id').innerText = "0x000";
            document.getElementById('id-disp-id').style.color = "#ff3333";
            document.getElementById('status-dot').style.background = "#ff3333";
            document.getElementById('status-dot').style.boxShadow = "0 0 5px #ff3333";

            document.getElementById('btn-admin').style.display = 'block';

            log('ACCESS GRANTED. PRIVILEGE ESCALATION SUCCESSFUL.', '#ff3333');
            log('Welcome to Root Mode.', '#ff3333');
            updateLight();
        }

        function unlockIdentity() {
            isIdentityUnlocked = true;
            document.getElementById('id-locked-view').style.display = 'none';
            document.getElementById('id-unlocked-view').style.display = 'flex';
            log('IDENTITY PROFILE DECRYPTED.', '#4ade80');
            switchTab('identity');
        }

        function checkGuiPin() {
            const p = document.getElementById('gui-pin');
            if (p.value === '4084') {
                unlockIdentity();
            } else {
                sysNotify('ACCESS DENIED: INCORRECT PIN');
                p.value = '';
            }
        }

        function copyEmail(email) {
            const el = document.createElement('textarea');
            el.value = email;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            sysNotify('EMAIL COPIED TO CLIPBOARD');
        }

        function sysNotify(msg) {
            const area = document.getElementById('notification-area');
            if (!area) return;

            const div = document.createElement('div');
            div.className = 'sys-msg';
            div.innerHTML = `<span style="font-weight:bold;">[SYSTEM]</span> ${msg}`;

            if (isRoot) {
                div.style.borderColor = '#ff3333';
                div.style.color = '#ff3333';
            }

            area.appendChild(div);

            setTimeout(() => {
                div.style.opacity = '0';
                div.style.transform = 'translateY(-10px)';
                div.style.transition = 'all 0.3s ease';
                setTimeout(() => div.remove(), 300);
            }, 3000);
        }

        function runCmd(cmd) {
            const parts = cmd.split(' ');
            const c = parts[0].toLowerCase();
            const args = parts.slice(1);

            switch (c) {
                case 'help':
                    log('AVAILABLE COMMANDS:', '#fff');
                    log('  neofetch  System Information');
                    log('  ls        List directory content');
                    log('  cd        Change directory');
                    log('  cat       Print file content');
                    log('  nano      Text Editor');
                    log('  pwd       Print working directory');
                    log('  clear     Clear terminal');
                    log('  whoami    Current user');
                    log('  id        User identity');
                    log('  date      Current time');
                    log('  ip        Network info');
                    log('  scan      Network scanner');
                    log('  unlock    Decrypt module');
                    log('  sudo      Execute as superuser');
                    break;

                case 'neofetch':
                    const browser = getBrowser();
                    const os = getOS();
                    const mem = getMemory();
                    const cores = navigator.hardwareConcurrency || 4;
                    const res = `${window.screen.width}x${window.screen.height}`;
                    const u = isRoot ? 'ROOT' : 'TORCH OS';
                    const c1 = isRoot ? '#ff3333' : '#ff9d00';

                    const logo = `
<span style="color:#5d4037">      (</span>
<span style="color:#5d4037">     . )</span>
<span style="color:#5d4037">    ( (</span>
<span style="color:#ff5722">   (   )</span>   <span style="color:${c1}; font-weight:bold;">${u}</span>
<span style="color:#ffeb3b">    ) (</span>    --------
<span style="color:#ff5722">   ( v )</span>   <span style="color:#ccc">OS:</span> ${os} (Web)
<span style="color:#5d4037">    \\ /</span>    <span style="color:#ccc">Browser:</span> ${browser}
<span style="color:#5d4037">     V</span>     <span style="color:#ccc">User:</span> ${isRoot ? 'root' : 'torch'}
            <span style="color:#ccc">Uptime:</span> ${(performance.now() / 60000).toFixed(0)} mins
            <span style="color:#ccc">Shell:</span> bash 5.1
            <span style="color:#ccc">Resolution:</span> ${res}
            <span style="color:#ccc">CPU:</span> ${cores} x Core
            <span style="color:#ccc">Memory:</span> ${mem}`;
                    const div = document.createElement('div');
                    div.className = 'ln';
                    div.style.whiteSpace = 'pre';
                    div.style.fontFamily = 'monospace';
                    div.innerHTML = logo;
                    term.appendChild(div);
                    break;

                case 'ls':
                    const showHidden = args.includes('-a');
                    let targetDir = args.filter(a => a !== '-a')[0];
                    targetDir = targetDir ? resolvePath(targetDir) : currentDir;

                    if (targetDir.startsWith('/root') && !isRoot) {
                        log(`ls: cannot open directory '${targetDir}': Permission denied`, '#f55');
                    } else if (fileSystem[targetDir]) {
                        let files = fileSystem[targetDir];
                        if (!showHidden) {
                            files = files.filter(f => !f.startsWith('.'));
                        }
                        log(files.join('  '), '#4ade80');
                    } else {
                        log(`ls: cannot access '${targetDir}': No such file or directory`, '#f55');
                    }
                    break;

                case 'nano':
                    if (!args[0]) {
                        log('nano: filename argument required');
                    } else {
                        const targetNano = resolvePath(args[0]);
                        if (targetNano.startsWith('/root') && !isRoot) {
                            log(`nano: ${args[0]}: Permission denied`, '#f55');
                        } else {
                            openNano(args[0]);
                            throw new Error('nano');
                        }
                    }
                    break;

                case 'cd':
                    if (!args[0] || args[0] === '~') {
                        currentDir = '/home/torch';
                    } else {
                        const target = resolvePath(args[0]);
                        if (target.startsWith('/root') && !isRoot) {
                            log(`bash: cd: ${args[0]}: Permission denied`, '#f55');
                        } else if (fileSystem[target]) {
                            currentDir = target;
                        } else {
                            log(`bash: cd: ${args[0]}: No such file or directory`, '#f55');
                        }
                    }
                    break;

                case 'cat':
                    if (!args[0]) {
                        log('cat: missing operand');
                    } else {
                        const targetFile = resolvePath(args[0]);
                        if (targetFile.startsWith('/root') && !isRoot) {
                            log(`cat: ${args[0]}: Permission denied`, '#f55');
                        } else if (fileContents[targetFile]) {
                            log(fileContents[targetFile]);
                        } else {
                            if (fileSystem[targetFile]) {
                                log(`cat: ${args[0]}: Is a directory`, '#f55');
                            } else {
                                log(`cat: ${args[0]}: No such file or directory`, '#f55');
                            }
                        }
                    }
                    break;

                case 'pwd':
                    log(currentDir);
                    break;

                case 'whoami':
                    log(isRoot ? 'root' : 'torch');
                    break;

                case 'id':
                    log(isRoot ? 'uid=0(root) gid=0(root) groups=0(root)' : 'uid=1000(torch) gid=1000(torch) groups=1000(torch),4(adm),27(sudo)');
                    break;

                case 'clear':
                    term.innerHTML = '';
                    break;

                case 'resources':
                    switchTab('resources');
                    break;

                case 'date':
                    log(new Date().toString());
                    break;

                case 'ip':
                case 'ifconfig':
                    log('eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500');
                    log('      inet 192.168.1.104  netmask 255.255.255.0  broadcast 192.168.1.255');
                    log('lo:   flags=73<UP,LOOPBACK,RUNNING>  mtu 65536');
                    log('      inet 127.0.0.1  netmask 255.0.0.0');
                    break;

                case 'scan':
                    const target = args[0] || '192.168.1.1';
                    log(`Starting Nmap 7.92 ( https://nmap.org ) at ${new Date().toLocaleTimeString()}`);
                    log(`Nmap scan report for ${target}`);
                    log(`Host is up (0.0023s latency).`);
                    log(`Not shown: 998 closed tcp ports (reset)`);
                    log(`PORT   STATE SERVICE`);
                    setTimeout(() => log(`22/tcp open  ssh`), 400);
                    setTimeout(() => log(`80/tcp open  http`), 800);
                    setTimeout(() => {
                        log(`\nNmap done: 1 IP address (1 host up) scanned in 1.24 seconds`);
                        termInput();
                    }, 1200);
                    throw new Error('async_scan');
                    break;

                case 'unlock':
                    if (isIdentityUnlocked) {
                        log('Identity profile is already unlocked.');
                    } else if (args[0] === '4084') {
                        unlockIdentity();
                    } else {
                        log('Access Denied. Incorrect PIN.', '#f55');
                    }
                    break;

                case 'reboot':
                    log('Rebooting system...');
                    setTimeout(() => location.reload(), 1000);
                    break;

                case 'sudo':
                    if (isRoot) {
                        log('You are already root.');
                        break;
                    }
                    if (!args[0] || args[0] === 'su' || args[0] === '-i') {
                        const sudoInput = document.createElement('div');
                        sudoInput.className = 'ln';
                        sudoInput.innerHTML = `[sudo] password for torch: <input type="password" class="inp" style="width:150px">`;
                        term.appendChild(sudoInput);
                        const pInput = sudoInput.querySelector('input');
                        pInput.focus();
                        pInput.onkeydown = e => {
                            if (e.key === 'Enter') {
                                pInput.disabled = true;
                                if (pInput.value === 'torchos_admin_2025') {
                                    activateRootMode();
                                } else {
                                    log('Sorry, try again.', '#f55');
                                }
                                termInput();
                            }
                        };
                        throw new Error('sudo_wait');
                    } else {
                        log('sudo: command not available (try: sudo su)');
                    }
                    break;

                case 'history':
                    commandHistory.forEach((h, i) => log(`  ${i + 1}  ${h}`));
                    break;

                default:
                    log(`bash: ${c}: command not found`, '#f55');
            }
        }

        function log(t, color = '#ccc') {
            const d = document.createElement('div');
            d.className = 'ln'; d.style.color = color; d.innerText = t;
            term.appendChild(d);
            term.scrollTop = term.scrollHeight;
        }

        try { termInput(); } catch (e) { }

        function runRecon() {
            const div = document.getElementById('local-grid');
            div.innerHTML = '';
            const stats = [
                { l: 'OS', v: getOS() },
                { l: 'CORES', v: navigator.hardwareConcurrency || 'N/A' },
                { l: 'MEMORY', v: getMemory() },
                { l: 'RES', v: `${window.screen.width}x${window.screen.height}` },
                { l: 'BROWSER', v: getBrowser() },
                { l: 'ONLINE', v: navigator.onLine ? 'YES' : 'NO' }
            ];
            stats.forEach(s => {
                div.innerHTML += `
                <div class="data-card">
                    <h3 style="color:var(--c-accent); font-size:0.7rem; font-weight:bold; margin-bottom:5px;">${s.l}</h3>
                    <div class="data-val">${s.v}</div>
                </div>`;
            });
        }

        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];

        const cfg = {
            particleDensity: 5000,
            maxParticles: 500,
            connectDist: 100,
            connectDistSq: 10000,
            mouseDist: 350
        };

        function initParticles() {
            particles = [];
            let count = Math.floor((width * height) / cfg.particleDensity);
            if (count > cfg.maxParticles) count = cfg.maxParticles;
            if (count < 50) count = 50;

            for (let i = 0; i < count; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    vx: (Math.random() - 0.5) * 2.5,
                    vy: (Math.random() - 0.5) * 2.5,
                    s: 1.5 + Math.random() * 2,
                    colorVar: Math.floor(Math.random() * 3)
                });
            }
        }

        function resize() {
            const dpr = Math.min(window.devicePixelRatio || 1, 2);

            width = window.innerWidth;
            height = window.innerHeight;
            canvas.style.width = `${width}px`;
            canvas.style.height = `${height}px`;

            canvas.width = width * dpr;
            canvas.height = height * dpr;

            ctx.scale(dpr, dpr);

            initParticles();
        }
        window.addEventListener('resize', resize);
        resize();

        function animate() {
            ctx.clearRect(0, 0, width, height);

            const palette = isRoot
                ? ['#ff3333', '#ff0000', '#bf0000']
                : ['#ff9d00', '#ff5722', '#ffcc00'];

            for (let i = 0; i < particles.length; i++) {
                let p = particles[i];
                let pColor = palette[p.colorVar];

                p.x += p.vx;
                p.y += p.vy;

                if (p.x < 0 || p.x > width) p.vx *= -1;
                if (p.y < 0 || p.y > height) p.vy *= -1;

                const dx_m = p.x - mx;
                const dy_m = p.y - my;
                const dist_m = Math.sqrt(dx_m * dx_m + dy_m * dy_m);

                for (let j = i + 1; j < particles.length; j++) {
                    let p2 = particles[j];
                    let dx = p.x - p2.x;

                    if (dx > cfg.connectDist || dx < -cfg.connectDist) continue;

                    let dy = p.y - p2.y;

                    if (dy > cfg.connectDist || dy < -cfg.connectDist) continue;

                    let distSq = dx * dx + dy * dy;

                    if (distSq < cfg.connectDistSq) {
                        ctx.beginPath();
                        ctx.strokeStyle = pColor;

                        let dist = Math.sqrt(distSq);
                        let alpha = (1 - dist / cfg.connectDist) * 0.5;

                        if (dist_m < cfg.mouseDist) {
                            alpha += (1 - dist_m / cfg.mouseDist) * 0.8;
                        } else {
                            alpha *= 0.15;
                        }

                        if (alpha > 1) alpha = 1;
                        if (alpha < 0) alpha = 0;

                        if (alpha > 0.01) {
                            ctx.globalAlpha = alpha;
                            ctx.lineWidth = 1;
                            ctx.moveTo(p.x, p.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.stroke();
                        }
                    }
                }

                ctx.fillStyle = pColor;
                let pAlpha = 0.2;
                if (dist_m < cfg.mouseDist) pAlpha += (1 - dist_m / cfg.mouseDist);
                if (pAlpha > 1) pAlpha = 1;

                ctx.globalAlpha = pAlpha;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.s, 0, Math.PI * 2);
                ctx.fill();
            }
            requestAnimationFrame(animate);
        }
        animate();

    </script>
</body>

</html>
